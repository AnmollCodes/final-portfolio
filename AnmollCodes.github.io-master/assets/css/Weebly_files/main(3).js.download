(function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:false};e[i].call(r.exports,r,r.exports,n);r.loaded=true;return r.exports}n.m=e;n.c=t;n.p="https://cdn2.editmysite.com/js/";n.p="https://"+window.ASSETS_BASE+"/js/"||n.p;return n(0)})([function(e,t,n){e.exports=n(12)},function(e,t,n){var i,r;(function(){var n=this;var s=n._;var o=Array.prototype,a=Object.prototype,l=Function.prototype;var u=o.push,c=o.slice,f=a.toString,h=a.hasOwnProperty;var d=Array.isArray,p=Object.keys,v=l.bind,g=Object.create;var m=function(){};var y=function(e){if(e instanceof y)return e;if(!(this instanceof y))return new y(e);this._wrapped=e};if(true){if(typeof e!=="undefined"&&e.exports){t=e.exports=y}t._=y}else{n._=y}y.VERSION="1.8.3";var _=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,s){return e.call(t,n,i,r,s)}}return function(){return e.apply(t,arguments)}};var b=function(e,t,n){if(e==null)return y.identity;if(y.isFunction(e))return _(e,t,n);if(y.isObject(e))return y.matcher(e);return y.property(e)};y.iteratee=function(e,t){return b(e,t,Infinity)};var w=function(e,t){return function(n){var i=arguments.length;if(i<2||n==null)return n;for(var r=1;r<i;r++){var s=arguments[r],o=e(s),a=o.length;for(var l=0;l<a;l++){var u=o[l];if(!t||n[u]===void 0)n[u]=s[u]}}return n}};var k=function(e){if(!y.isObject(e))return{};if(g)return g(e);m.prototype=e;var t=new m;m.prototype=null;return t};var C=function(e){return function(t){return t==null?void 0:t[e]}};var x=Math.pow(2,53)-1;var M=C("length");var E=function(e){var t=M(e);return typeof t=="number"&&t>=0&&t<=x};y.each=y.forEach=function(e,t,n){t=_(t,n);var i,r;if(E(e)){for(i=0,r=e.length;i<r;i++){t(e[i],i,e)}}else{var s=y.keys(e);for(i=0,r=s.length;i<r;i++){t(e[s[i]],s[i],e)}}return e};y.map=y.collect=function(e,t,n){t=b(t,n);var i=!E(e)&&y.keys(e),r=(i||e).length,s=Array(r);for(var o=0;o<r;o++){var a=i?i[o]:o;s[o]=t(e[a],a,e)}return s};function S(e){function t(t,n,i,r,s,o){for(;s>=0&&s<o;s+=e){var a=r?r[s]:s;i=n(i,t[a],a,t)}return i}return function(n,i,r,s){i=_(i,s,4);var o=!E(n)&&y.keys(n),a=(o||n).length,l=e>0?0:a-1;if(arguments.length<3){r=n[o?o[l]:l];l+=e}return t(n,i,r,o,l,a)}}y.reduce=y.foldl=y.inject=S(1);y.reduceRight=y.foldr=S(-1);y.find=y.detect=function(e,t,n){var i;if(E(e)){i=y.findIndex(e,t,n)}else{i=y.findKey(e,t,n)}if(i!==void 0&&i!==-1)return e[i]};y.filter=y.select=function(e,t,n){var i=[];t=b(t,n);y.each(e,function(e,n,r){if(t(e,n,r))i.push(e)});return i};y.reject=function(e,t,n){return y.filter(e,y.negate(b(t)),n)};y.every=y.all=function(e,t,n){t=b(t,n);var i=!E(e)&&y.keys(e),r=(i||e).length;for(var s=0;s<r;s++){var o=i?i[s]:s;if(!t(e[o],o,e))return false}return true};y.some=y.any=function(e,t,n){t=b(t,n);var i=!E(e)&&y.keys(e),r=(i||e).length;for(var s=0;s<r;s++){var o=i?i[s]:s;if(t(e[o],o,e))return true}return false};y.contains=y.includes=y.include=function(e,t,n,i){if(!E(e))e=y.values(e);if(typeof n!="number"||i)n=0;return y.indexOf(e,t,n)>=0};y.invoke=function(e,t){var n=c.call(arguments,2);var i=y.isFunction(t);return y.map(e,function(e){var r=i?t:e[t];return r==null?r:r.apply(e,n)})};y.pluck=function(e,t){return y.map(e,y.property(t))};y.where=function(e,t){return y.filter(e,y.matcher(t))};y.findWhere=function(e,t){return y.find(e,y.matcher(t))};y.max=function(e,t,n){var i=-Infinity,r=-Infinity,s,o;if(t==null&&e!=null){e=E(e)?e:y.values(e);for(var a=0,l=e.length;a<l;a++){s=e[a];if(s>i){i=s}}}else{t=b(t,n);y.each(e,function(e,n,s){o=t(e,n,s);if(o>r||o===-Infinity&&i===-Infinity){i=e;r=o}})}return i};y.min=function(e,t,n){var i=Infinity,r=Infinity,s,o;if(t==null&&e!=null){e=E(e)?e:y.values(e);for(var a=0,l=e.length;a<l;a++){s=e[a];if(s<i){i=s}}}else{t=b(t,n);y.each(e,function(e,n,s){o=t(e,n,s);if(o<r||o===Infinity&&i===Infinity){i=e;r=o}})}return i};y.shuffle=function(e){var t=E(e)?e:y.values(e);var n=t.length;var i=Array(n);for(var r=0,s;r<n;r++){s=y.random(0,r);if(s!==r)i[r]=i[s];i[s]=t[r]}return i};y.sample=function(e,t,n){if(t==null||n){if(!E(e))e=y.values(e);return e[y.random(e.length-1)]}return y.shuffle(e).slice(0,Math.max(0,t))};y.sortBy=function(e,t,n){t=b(t,n);return y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria;var i=t.criteria;if(n!==i){if(n>i||n===void 0)return 1;if(n<i||i===void 0)return-1}return e.index-t.index}),"value")};var R=function(e){return function(t,n,i){var r={};n=b(n,i);y.each(t,function(i,s){var o=n(i,s,t);e(r,i,o)});return r}};y.groupBy=R(function(e,t,n){if(y.has(e,n))e[n].push(t);else e[n]=[t]});y.indexBy=R(function(e,t,n){e[n]=t});y.countBy=R(function(e,t,n){if(y.has(e,n))e[n]++;else e[n]=1});y.toArray=function(e){if(!e)return[];if(y.isArray(e))return c.call(e);if(E(e))return y.map(e,y.identity);return y.values(e)};y.size=function(e){if(e==null)return 0;return E(e)?e.length:y.keys(e).length};y.partition=function(e,t,n){t=b(t,n);var i=[],r=[];y.each(e,function(e,n,s){(t(e,n,s)?i:r).push(e)});return[i,r]};y.first=y.head=y.take=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[0];return y.initial(e,e.length-t)};y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))};y.last=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[e.length-1];return y.rest(e,Math.max(0,e.length-t))};y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,t==null||n?1:t)};y.compact=function(e){return y.filter(e,y.identity)};var F=function(e,t,n,i){var r=[],s=0;for(var o=i||0,a=M(e);o<a;o++){var l=e[o];if(E(l)&&(y.isArray(l)||y.isArguments(l))){if(!t)l=F(l,t,n);var u=0,c=l.length;r.length+=c;while(u<c){r[s++]=l[u++]}}else if(!n){r[s++]=l}}return r};y.flatten=function(e,t){return F(e,t,false)};y.without=function(e){return y.difference(e,c.call(arguments,1))};y.uniq=y.unique=function(e,t,n,i){if(!y.isBoolean(t)){i=n;n=t;t=false}if(n!=null)n=b(n,i);var r=[];var s=[];for(var o=0,a=M(e);o<a;o++){var l=e[o],u=n?n(l,o,e):l;if(t){if(!o||s!==u)r.push(l);s=u}else if(n){if(!y.contains(s,u)){s.push(u);r.push(l)}}else if(!y.contains(r,l)){r.push(l)}}return r};y.union=function(){return y.uniq(F(arguments,true,true))};y.intersection=function(e){var t=[];var n=arguments.length;for(var i=0,r=M(e);i<r;i++){var s=e[i];if(y.contains(t,s))continue;for(var o=1;o<n;o++){if(!y.contains(arguments[o],s))break}if(o===n)t.push(s)}return t};y.difference=function(e){var t=F(arguments,true,true,1);return y.filter(e,function(e){return!y.contains(t,e)})};y.zip=function(){return y.unzip(arguments)};y.unzip=function(e){var t=e&&y.max(e,M).length||0;var n=Array(t);for(var i=0;i<t;i++){n[i]=y.pluck(e,i)}return n};y.object=function(e,t){var n={};for(var i=0,r=M(e);i<r;i++){if(t){n[e[i]]=t[i]}else{n[e[i][0]]=e[i][1]}}return n};function T(e){return function(t,n,i){n=b(n,i);var r=M(t);var s=e>0?0:r-1;for(;s>=0&&s<r;s+=e){if(n(t[s],s,t))return s}return-1}}y.findIndex=T(1);y.findLastIndex=T(-1);y.sortedIndex=function(e,t,n,i){n=b(n,i,1);var r=n(t);var s=0,o=M(e);while(s<o){var a=Math.floor((s+o)/2);if(n(e[a])<r)s=a+1;else o=a}return s};function D(e,t,n){return function(i,r,s){var o=0,a=M(i);if(typeof s=="number"){if(e>0){o=s>=0?s:Math.max(s+a,o)}else{a=s>=0?Math.min(s+1,a):s+a+1}}else if(n&&s&&a){s=n(i,r);return i[s]===r?s:-1}if(r!==r){s=t(c.call(i,o,a),y.isNaN);return s>=0?s+o:-1}for(s=e>0?o:a-1;s>=0&&s<a;s+=e){if(i[s]===r)return s}return-1}}y.indexOf=D(1,y.findIndex,y.sortedIndex);y.lastIndexOf=D(-1,y.findLastIndex);y.range=function(e,t,n){if(t==null){t=e||0;e=0}n=n||1;var i=Math.max(Math.ceil((t-e)/n),0);var r=Array(i);for(var s=0;s<i;s++,e+=n){r[s]=e}return r};var O=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var s=k(e.prototype);var o=e.apply(s,r);if(y.isObject(o))return o;return s};y.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2);var i=function(){return O(e,i,t,this,n.concat(c.call(arguments)))};return i};y.partial=function(e){var t=c.call(arguments,1);var n=function(){var i=0,r=t.length;var s=Array(r);for(var o=0;o<r;o++){s[o]=t[o]===y?arguments[i++]:t[o]}while(i<arguments.length)s.push(arguments[i++]);return O(e,n,this,this,s)};return n};y.bindAll=function(e){var t,n=arguments.length,i;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++){i=arguments[t];e[i]=y.bind(e[i],e)}return e};y.memoize=function(e,t){var n=function(i){var r=n.cache;var s=""+(t?t.apply(this,arguments):i);if(!y.has(r,s))r[s]=e.apply(this,arguments);return r[s]};n.cache={};return n};y.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};y.defer=y.partial(y.delay,y,1);y.throttle=function(e,t,n){var i,r,s;var o=null;var a=0;if(!n)n={};var l=function(){a=n.leading===false?0:y.now();o=null;s=e.apply(i,r);if(!o)i=r=null};return function(){var u=y.now();if(!a&&n.leading===false)a=u;var c=t-(u-a);i=this;r=arguments;if(c<=0||c>t){if(o){clearTimeout(o);o=null}a=u;s=e.apply(i,r);if(!o)i=r=null}else if(!o&&n.trailing!==false){o=setTimeout(l,c)}return s}};y.debounce=function(e,t,n){var i,r,s,o,a;var l=function(){var u=y.now()-o;if(u<t&&u>=0){i=setTimeout(l,t-u)}else{i=null;if(!n){a=e.apply(s,r);if(!i)s=r=null}}};return function(){s=this;r=arguments;o=y.now();var u=n&&!i;if(!i)i=setTimeout(l,t);if(u){a=e.apply(s,r);s=r=null}return a}};y.wrap=function(e,t){return y.partial(t,e)};y.negate=function(e){return function(){return!e.apply(this,arguments)}};y.compose=function(){var e=arguments;var t=e.length-1;return function(){var n=t;var i=e[t].apply(this,arguments);while(n--)i=e[n].call(this,i);return i}};y.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};y.before=function(e,t){var n;return function(){if(--e>0){n=t.apply(this,arguments)}if(e<=1)t=null;return n}};y.once=y.partial(y.before,2);var A=!{toString:null}.propertyIsEnumerable("toString");var I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function P(e,t){var n=I.length;var i=e.constructor;var r=y.isFunction(i)&&i.prototype||a;var s="constructor";if(y.has(e,s)&&!y.contains(t,s))t.push(s);while(n--){s=I[n];if(s in e&&e[s]!==r[s]&&!y.contains(t,s)){t.push(s)}}}y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)if(y.has(e,n))t.push(n);if(A)P(e,t);return t};y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);if(A)P(e,t);return t};y.values=function(e){var t=y.keys(e);var n=t.length;var i=Array(n);for(var r=0;r<n;r++){i[r]=e[t[r]]}return i};y.mapObject=function(e,t,n){t=b(t,n);var i=y.keys(e),r=i.length,s={},o;for(var a=0;a<r;a++){o=i[a];s[o]=t(e[o],o,e)}return s};y.pairs=function(e){var t=y.keys(e);var n=t.length;var i=Array(n);for(var r=0;r<n;r++){i[r]=[t[r],e[t[r]]]}return i};y.invert=function(e){var t={};var n=y.keys(e);for(var i=0,r=n.length;i<r;i++){t[e[n[i]]]=n[i]}return t};y.functions=y.methods=function(e){var t=[];for(var n in e){if(y.isFunction(e[n]))t.push(n)}return t.sort()};y.extend=w(y.allKeys);y.extendOwn=y.assign=w(y.keys);y.findKey=function(e,t,n){t=b(t,n);var i=y.keys(e),r;for(var s=0,o=i.length;s<o;s++){r=i[s];if(t(e[r],r,e))return r}};y.pick=function(e,t,n){var i={},r=e,s,o;if(r==null)return i;if(y.isFunction(t)){o=y.allKeys(r);s=_(t,n)}else{o=F(arguments,false,false,1);s=function(e,t,n){return t in n};r=Object(r)}for(var a=0,l=o.length;a<l;a++){var u=o[a];var c=r[u];if(s(c,u,r))i[u]=c}return i};y.omit=function(e,t,n){if(y.isFunction(t)){t=y.negate(t)}else{var i=y.map(F(arguments,false,false,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)};y.defaults=w(y.allKeys,true);y.create=function(e,t){var n=k(e);if(t)y.extendOwn(n,t);return n};y.clone=function(e){if(!y.isObject(e))return e;return y.isArray(e)?e.slice():y.extend({},e)};y.tap=function(e,t){t(e);return e};y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(e==null)return!i;var r=Object(e);for(var s=0;s<i;s++){var o=n[s];if(t[o]!==r[o]||!(o in r))return false}return true};var j=function(e,t,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof y)e=e._wrapped;if(t instanceof y)t=t._wrapped;var r=f.call(e);if(r!==f.call(t))return false;switch(r){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=r==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return false;var o=e.constructor,a=t.constructor;if(o!==a&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(a)&&a instanceof a)&&("constructor"in e&&"constructor"in t)){return false}}n=n||[];i=i||[];var l=n.length;while(l--){if(n[l]===e)return i[l]===t}n.push(e);i.push(t);if(s){l=e.length;if(l!==t.length)return false;while(l--){if(!j(e[l],t[l],n,i))return false}}else{var u=y.keys(e),c;l=u.length;if(y.keys(t).length!==l)return false;while(l--){c=u[l];if(!(y.has(t,c)&&j(e[c],t[c],n,i)))return false}}n.pop();i.pop();return true};y.isEqual=function(e,t){return j(e,t)};y.isEmpty=function(e){if(e==null)return true;if(E(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e)))return e.length===0;return y.keys(e).length===0};y.isElement=function(e){return!!(e&&e.nodeType===1)};y.isArray=d||function(e){return f.call(e)==="[object Array]"};y.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}});if(!y.isArguments(arguments)){y.isArguments=function(e){return y.has(e,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){y.isFunction=function(e){return typeof e=="function"||false}}y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};y.isNaN=function(e){return y.isNumber(e)&&e!==+e};y.isBoolean=function(e){return e===true||e===false||f.call(e)==="[object Boolean]"};y.isNull=function(e){return e===null};y.isUndefined=function(e){return e===void 0};y.has=function(e,t){return e!=null&&h.call(e,t)};y.noConflict=function(){n._=s;return this};y.identity=function(e){return e};y.constant=function(e){return function(){return e}};y.noop=function(){};y.property=C;y.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}};y.matcher=y.matches=function(e){e=y.extendOwn({},e);return function(t){return y.isMatch(t,e)}};y.times=function(e,t,n){var i=Array(Math.max(0,e));t=_(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i};y.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};y.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var N=y.invert(z);var q=function(e){var t=function(t){return e[t]};var n="(?:"+y.keys(e).join("|")+")";var i=RegExp(n);var r=RegExp(n,"g");return function(e){e=e==null?"":""+e;return i.test(e)?e.replace(r,t):e}};y.escape=q(z);y.unescape=q(N);y.result=function(e,t,n){var i=e==null?void 0:e[t];if(i===void 0){i=n}return y.isFunction(i)?i.call(e):i};var Y=0;y.uniqueId=function(e){var t=++Y+"";return e?e+t:t};y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/;var H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var L=/\\|'|\r|\n|\u2028|\u2029/g;var B=function(e){return"\\"+H[e]};y.template=function(e,t,n){if(!t&&n)t=n;t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g");var r=0;var s="__p+='";e.replace(i,function(t,n,i,o,a){s+=e.slice(r,a).replace(L,B);r=a+t.length;if(n){s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}else if(i){s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"}else if(o){s+="';\n"+o+"\n__p+='"}return t});s+="';\n";if(!t.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(e){e.source=s;throw e}var a=function(e){return o.call(this,e,y)};var l=t.variable||"obj";a.source="function("+l+"){\n"+s+"}";return a};y.chain=function(e){var t=y(e);t._chain=true;return t};var W=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];u.apply(e,arguments);return W(this,n.apply(y,e))}})};y.mixin(y);y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];y.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e==="shift"||e==="splice")&&n.length===0)delete n[0];return W(this,n)}});y.each(["concat","join","slice"],function(e){var t=o[e];y.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}});y.prototype.value=function(){return this._wrapped};y.prototype.valueOf=y.prototype.toJSON=y.prototype.value;y.prototype.toString=function(){return""+this._wrapped};if(true){!(i=[],r=function(){return y}.apply(t,i),r!==undefined&&(e.exports=r))}}).call(this)},function(e,t,n){var i,r;(function(s,o){if(true){!(i=[n(1),n(3),t],r=function(e,t,n){s.Backbone=o(s,n,e,t)}.apply(t,i),r!==undefined&&(e.exports=r))}else if(typeof t!=="undefined"){var a=require("underscore");o(s,t,a)}else{s.Backbone=o(s,{},s._,s.jQuery||s.Zepto||s.ender||s.$)}})(this,function(e,t,n,i){var r=e.Backbone;var s=[];var o=s.push;var a=s.slice;var l=s.splice;t.VERSION="1.1.2";t.$=i;t.noConflict=function(){e.Backbone=r;return this};t.emulateHTTP=false;t.emulateJSON=false;var u=t.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);i.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,i){if(!f(this,"once",e,[t,i])||!t)return this;var r=this;var s=n.once(function(){r.off(e,s);t.apply(this,arguments)});s._callback=t;return this.on(e,s,i)},off:function(e,t,i){var r,s,o,a,l,u,c,h;if(!this._events||!f(this,"off",e,[t,i]))return this;if(!e&&!t&&!i){this._events=void 0;return this}a=e?[e]:n.keys(this._events);for(l=0,u=a.length;l<u;l++){e=a[l];if(o=this._events[e]){this._events[e]=r=[];if(t||i){for(c=0,h=o.length;c<h;c++){s=o[c];if(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context){r.push(s)}}}if(!r.length)delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e];var i=this._events.all;if(n)h(n,t);if(i)h(i,arguments);return this},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var s=!t&&!i;if(!i&&typeof t==="object")i=this;if(e)(r={})[e._listenId]=e;for(var o in r){e=r[o];e.off(t,i,this);if(s||n.isEmpty(e._events))delete this._listeningTo[o]}return this}};var c=/\s+/;var f=function(e,t,n,i){if(!n)return true;if(typeof n==="object"){for(var r in n){e[t].apply(e,[r,n[r]].concat(i))}return false}if(c.test(n)){var s=n.split(c);for(var o=0,a=s.length;o<a;o++){e[t].apply(e,[s[o]].concat(i))}return false}return true};var h=function(e,t){var n,i=-1,r=e.length,s=t[0],o=t[1],a=t[2];switch(t.length){case 0:while(++i<r)(n=e[i]).callback.call(n.ctx);return;case 1:while(++i<r)(n=e[i]).callback.call(n.ctx,s);return;case 2:while(++i<r)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:while(++i<r)(n=e[i]).callback.call(n.ctx,s,o,a);return;default:while(++i<r)(n=e[i]).callback.apply(n.ctx,t);return}};var d={listenTo:"on",listenToOnce:"once"};n.each(d,function(e,t){u[t]=function(t,i,r){var s=this._listeningTo||(this._listeningTo={});var o=t._listenId||(t._listenId=n.uniqueId("l"));s[o]=t;if(!r&&typeof i==="object")r=this;t[e](i,r,this);return this}});u.bind=u.on;u.unbind=u.off;n.extend(t,u);var p=t.Model=function(e,t){var i=e||{};t||(t={});this.cid=n.uniqueId("c");this.attributes={};if(t.collection)this.collection=t.collection;if(t.parse)i=this.parse(i,t)||{};i=n.defaults({},i,n.result(this,"defaults"));this.set(i,t);this.changed={};this.initialize.apply(this,arguments)};n.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,i){var r,s,o,a,l,u,c,f;if(e==null)return this;if(typeof e==="object"){s=e;i=t}else{(s={})[e]=t}i||(i={});if(!this._validate(s,i))return false;o=i.unset;l=i.silent;a=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=n.clone(this.attributes);this.changed={}}f=this.attributes,c=this._previousAttributes;if(this.idAttribute in s)this.id=s[this.idAttribute];for(r in s){t=s[r];if(!n.isEqual(f[r],t))a.push(r);if(!n.isEqual(c[r],t)){this.changed[r]=t}else{delete this.changed[r]}o?delete f[r]:f[r]=t}if(!l){if(a.length)this._pending=i;for(var h=0,d=a.length;h<d;h++){this.trigger("change:"+a[h],this,f[a[h]],i)}}if(u)return this;if(!l){while(this._pending){i=this._pending;this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:true}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:true}))},hasChanged:function(e){if(e==null)return!n.isEmpty(this.changed);return n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):false;var t,i=false;var r=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(r[s],t=e[s]))continue;(i||(i={}))[s]=t}return i},previous:function(e){if(e==null||!this._previousAttributes)return null;return this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{};if(e.parse===void 0)e.parse=true;var t=this;var i=e.success;e.success=function(n){if(!t.set(t.parse(n,e),e))return false;if(i)i(t,n,e);t.trigger("sync",t,n,e)};q(this,e);return this.sync("read",this,e)},save:function(e,t,i){var r,s,o,a=this.attributes;if(e==null||typeof e==="object"){r=e;i=t}else{(r={})[e]=t}i=n.extend({validate:true},i);if(r&&!i.wait){if(!this.set(r,i))return false}else{if(!this._validate(r,i))return false}if(r&&i.wait){this.attributes=n.extend({},a,r)}if(i.parse===void 0)i.parse=true;var l=this;var u=i.success;i.success=function(e){l.attributes=a;var t=l.parse(e,i);if(i.wait)t=n.extend(r||{},t);if(n.isObject(t)&&!l.set(t,i)){return false}if(u)u(l,e,i);l.trigger("sync",l,e,i)};q(this,i);s=this.isNew()?"create":i.patch?"patch":"update";if(s==="patch")i.attrs=r;o=this.sync(s,this,i);if(r&&i.wait)this.attributes=a;return o},destroy:function(e){e=e?n.clone(e):{};var t=this;var i=e.success;var r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){if(e.wait||t.isNew())r();if(i)i(t,n,e);if(!t.isNew())t.trigger("sync",t,n,e)};if(this.isNew()){e.success();return false}q(this,e);var s=this.sync("delete",this,e);if(!e.wait)r();return s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();if(this.isNew())return e;return e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:true}))},_validate:function(e,t){if(!t.validate||!this.validate)return true;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;if(!i)return true;this.trigger("invalid",this,i,n.extend(t,{validationError:i}));return false}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){p.prototype[e]=function(){var t=a.call(arguments);t.unshift(this.attributes);return n[e].apply(n,t)}});var g=t.Collection=function(e,t){t||(t={});if(t.model)this.model=t.model;if(t.comparator!==void 0)this.comparator=t.comparator;this._reset();this.initialize.apply(this,arguments);if(e)this.reset(e,n.extend({silent:true},t))};var m={add:true,remove:true,merge:true};var y={add:true,remove:false};n.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:false},t,y))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e);t||(t={});var r,s,o,a;for(r=0,s=e.length;r<s;r++){a=e[r]=this.get(e[r]);if(!a)continue;delete this._byId[a.id];delete this._byId[a.cid];o=this.indexOf(a);this.models.splice(o,1);this.length--;if(!t.silent){t.index=o;a.trigger("remove",a,this,t)}this._removeReference(a,t)}return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m);if(t.parse)e=this.parse(e,t);var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var r,s,o,a,l,u,c;var f=t.at;var h=this.model;var d=this.comparator&&f==null&&t.sort!==false;var v=n.isString(this.comparator)?this.comparator:null;var g=[],y=[],_={};var b=t.add,w=t.merge,k=t.remove;var C=!d&&b&&k?[]:false;for(r=0,s=e.length;r<s;r++){l=e[r]||{};if(l instanceof p){o=a=l}else{o=l[h.prototype.idAttribute||"id"]}if(u=this.get(o)){if(k)_[u.cid]=true;if(w){l=l===a?a.attributes:l;if(t.parse)l=u.parse(l,t);u.set(l,t);if(d&&!c&&u.hasChanged(v))c=true}e[r]=u}else if(b){a=e[r]=this._prepareModel(l,t);if(!a)continue;g.push(a);this._addReference(a,t)}a=u||a;if(C&&(a.isNew()||!_[a.id]))C.push(a);_[a.id]=true}if(k){for(r=0,s=this.length;r<s;++r){if(!_[(a=this.models[r]).cid])y.push(a)}if(y.length)this.remove(y,t)}if(g.length||C&&C.length){if(d)c=true;this.length+=g.length;if(f!=null){for(r=0,s=g.length;r<s;r++){this.models.splice(f+r,0,g[r])}}else{if(C)this.models.length=0;var x=C||g;for(r=0,s=x.length;r<s;r++){this.models.push(x[r])}}}if(c)this.sort({silent:true});if(!t.silent){for(r=0,s=g.length;r<s;r++){(a=g[r]).trigger("add",a,this,t)}if(c||C&&C.length)this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,r=this.models.length;i<r;i++){this._removeReference(this.models[i],t)}t.previousModels=this.models;this._reset();e=this.add(e,n.extend({silent:true},t));if(!t.silent)this.trigger("reset",this,t);return e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);this.remove(t,e);return t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);this.remove(t,e);return t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){if(n.isEmpty(e))return t?void 0:[];return this[t?"find":"filter"](function(t){for(var n in e){if(e[n]!==t.get(n))return false}return true})},findWhere:function(e){return this.where(e,true)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");e||(e={});if(n.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(n.bind(this.comparator,this))}if(!e.silent)this.trigger("sort",this,e);return this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{};if(e.parse===void 0)e.parse=true;var t=e.success;var i=this;e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e);if(t)t(i,n,e);i.trigger("sync",i,n,e)};q(this,e);return this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return false;if(!t.wait)this.add(e,t);var i=this;var r=t.success;t.success=function(e,n){if(t.wait)i.add(e,t);if(r)r(e,n,t)};e.save(null,t);return e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e;t=t?n.clone(t):{};t.collection=this;var i=new this.model(e,t);if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,t);return false},_addReference:function(e,t){this._byId[e.cid]=e;if(e.id!=null)this._byId[e.id]=e;if(!e.collection)e.collection=this;e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){if(this===e.collection)delete e.collection;e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if((e==="add"||e==="remove")&&n!==this)return;if(e==="destroy")this.remove(t,i);if(t&&e==="change:"+t.idAttribute){delete this._byId[t.previous(t.idAttribute)];if(t.id!=null)this._byId[t.id]=t}this.trigger.apply(this,arguments)}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(_,function(e){g.prototype[e]=function(){var t=a.call(arguments);t.unshift(this.models);return n[e].apply(n,t)}});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(e){g.prototype[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,r,i)}});var w=t.View=function(e){this.cid=n.uniqueId("view");e||(e={});n.extend(this,n.pick(e,C));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var k=/^(\S+)\s*(.*)$/;var C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(w.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(e,n){if(this.$el)this.undelegateEvents();this.$el=e instanceof t.$?e:t.$(e);this.el=this.$el[0];if(n!==false)this.delegateEvents();return this},delegateEvents:function(e){if(!(e||(e=n.result(this,"events"))))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(!n.isFunction(i))i=this[e[t]];if(!i)continue;var r=t.match(k);var s=r[1],o=r[2];i=n.bind(i,this);s+=".delegateEvents"+this.cid;if(o===""){this.$el.on(s,i)}else{this.$el.on(s,o,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));if(this.id)e.id=n.result(this,"id");if(this.className)e["class"]=n.result(this,"className");var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,false)}else{this.setElement(n.result(this,"el"),false)}}});t.sync=function(e,i,r){var s=M[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};if(!r.url){o.url=n.result(i,"url")||N()}if(r.data==null&&i&&(e==="create"||e==="update"||e==="patch")){o.contentType="application/json";o.data=JSON.stringify(r.attrs||i.toJSON(r))}if(r.emulateJSON){o.contentType="application/x-www-form-urlencoded";o.data=o.data?{model:o.data}:{}}if(r.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST";if(r.emulateJSON)o.data._method=s;var a=r.beforeSend;r.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(a)return a.apply(this,arguments)}}if(o.type!=="GET"&&!r.emulateJSON){o.processData=false}if(o.type==="PATCH"&&x){o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var l=r.xhr=t.ajax(n.extend(o,r));i.trigger("request",i,l,r);return l};var x=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var M={create:"POST",update:"PUT",
patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={});if(e.routes)this.routes=e.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\((.*?)\)/g;var R=/(\(\?)?:\w+/g;var F=/\*\w+/g;var T=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,u,{initialize:function(){},route:function(e,i,r){if(!n.isRegExp(e))e=this._routeToRegExp(e);if(n.isFunction(i)){r=i;i=""}if(!r)r=this[i];var s=this;t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(r,o);s.trigger.apply(s,["route:"+i].concat(o));s.trigger("route",i,o);t.history.trigger("route",s,i,o)});return this},execute:function(e,t){if(e)e.apply(this,t)},navigate:function(e,n){t.history.navigate(e,n);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null){this.route(e,this.routes[e])}},_routeToRegExp:function(e){e=e.replace(T,"\\$&").replace(S,"(?:$1)?").replace(R,function(e,t){return t?e:"([^/?]+)"}).replace(F,"([^?]*?)");return new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){if(t===i.length-1)return e||null;return e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[];n.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var O=/^[#\/]|\s+$/g;var A=/^\/+|\/+$/g;var I=/msie [\w.]+/;var P=/\/$/;var j=/#.*$/;D.started=false;n.extend(D.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null){if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(P,"");if(!e.indexOf(n))e=e.slice(n.length)}else{e=this.getHash()}}return e.replace(O,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");D.started=true;this.options=n.extend({root:"/"},this.options,e);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment();var r=document.documentMode;var s=I.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);this.root=("/"+this.root+"/").replace(A,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow;this.navigate(i)}if(this._hasPushState){t.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!s){t.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&a.hash){this.fragment=this.getHash().replace(O,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);D.started=false},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe){t=this.getFragment(this.getHash(this.iframe))}if(t===this.fragment)return false;if(this.iframe)this.navigate(t);this.loadUrl()},loadUrl:function(e){e=this.fragment=this.getFragment(e);return n.any(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}})},navigate:function(e,t){if(!D.started)return false;if(!t||t===true)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(j,"");if(this.fragment===e)return;this.fragment=e;if(e===""&&n!=="/")n=n.slice(0,-1);if(this._hasPushState){this.history[t.replace?"replaceState":"pushState"]({},document.title,n)}else if(this._wantsHashChange){this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getFragment(this.getHash(this.iframe))){if(!t.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,e,t.replace)}}else{return this.location.assign(n)}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else{e.hash="#"+t}}});t.history=new D;var z=function(e,t){var i=this;var r;if(e&&n.has(e,"constructor")){r=e.constructor}else{r=function(){return i.apply(this,arguments)}}n.extend(r,i,t);var s=function(){this.constructor=r};s.prototype=i.prototype;r.prototype=new s;if(e)n.extend(r.prototype,e);r.__super__=i.prototype;return r};p.extend=g.extend=E.extend=w.extend=D.extend=z;var N=function(){throw new Error('A "url" property or function must be specified')};var q=function(e,t){var n=t.error;t.error=function(i){if(n)n(e,i,t);e.trigger("error",e,i,t)}};return t})},function(e,t,n){var i;!(i=function(){if(window.Weebly!==undefined&&window.Weebly.jQuery!==undefined){return window.Weebly.jQuery}return window.jQuery}.call(t,n,t,e),i!==undefined&&(e.exports=i))},function(e,t,n){var i,r;!(i=[n(3)],r=function(e){window.Weebly=window._W=window._W||{};window._W.utl=window._W.utl||function(e){window._W.failedTls=window._W.failedTls||[];window._W.failedTls.push(e);return e};window._W.ftl=window._W.ftl||function(e){window._W.failedFtls=window._W.failedFtls||[];window._W.failedFtls.push(e);return""};window._W.utl=window._W.utl||function(e){window._W.failedUtls=window._W.failedUtls||[];window._W.failedUtls.push(e);return""};window._W.stl=window._W.stl||function(e){window._W.failedStls=window._W.failedStls||[];window._W.failedStls.push(e);return""};window._W.setCookie=function(e,t,n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+r};window._W.clearCookie=function(e){window._W.setCookie(e,"",-1)};window._W.getCookie=function(e){var t=e+"=";var n=document.cookie.split(";");for(var i=0;i<n.length;i++){var r=n[i];while(r.charAt(0)==" ")r=r.substring(1);if(r.indexOf(t)==0)return r.substring(t.length,r.length)}return""};window._W.jQuery=e;window._W.RECAPTCHA_PUBLIC_KEY=window["RECAPTCHA_PUBLIC_KEY"]="6Lf4O9USAAAAAOSa9cF4SEtxBcjrwrLe1_yP00ke";window._W.INVISIBLE_RECAPTCHA_PUBLIC_KEY=window["INVISIBLE_RECAPTCHA_PUBLIC_KEY"]="6LfRSRsUAAAAAKZnbFLRh9pFqexMBpUkku4TAYM7";return window._W}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(3),n(1),n(4),n(7),n(25)],r=function(e,t,n,i,r){window.Mustache=i;var s=n.AdminType;var o={date:"MMMM D, YYYY",shortDate:"M/D/YY",longDate:"M/D/YYYY",time:"h:mm a"};var a=function(e){return function(t,n){var i=n(t),s=r.unix(i);return s.format(o[e])}};var l={expireCookie:function(e){document.cookie=e+"=; expires=Thu, 18 Dec 2000 12:00:00 UTC"},setCookie:function(e,t){l.expireCookie(e);document.cookie=e+"="+t+"; path=/; domain="+window.location.hostname}};function u(){return function(e,t){return t(n.stl(e))}}var c={buildTime:typeof window.buildTime!=="undefined"?window.buildTime:null,ASSETS_BASE:typeof window.ASSETS_BASE!=="undefined"?window.ASSETS_BASE:null,tl:function(){return function(e,t){return t(n.utl(e))}},ftl:u,stl:u,esc_attr:function(){return function(e,n){return t.escape(n(e))}},fmt:{date:function(){return a("date")},shortDate:function(){return a("shortDate")},longDate:function(){return a("longDate")},time:function(){return a("time")}},isWeeblyAdmin:function(){return s==="weebly"},td:function(){return function(e,n){var i=["d","j","m","n","y","Y","a","A","g","h","G","H","i","s"];var s=["DD","D","MM","M","YY","YYYY","a","A","hh","h","HH","H","mm","ss"];t.each(i,function(t,n){e=e.replace(t,s[n])});var o=e.split(/\|/);var a=o[0];var l=n("{{"+o[1]+"}}");var u=r(l).format(a);return u}},csrf_input:function(){var e=window.csrfToken;if(!e){e=Math.random().toString(36).substring(2);l.setCookie("_csrf",e)}return"<input type='hidden' name='_csrf' value='"+e+"' />"}};i.origRender=i.render;i.render=function(e,n,r){n=t.extend({},n,c);r=t.extend({},this.partialCache,r);return i.origRender.call(this,e,n,r)};i.compile=function(e){return this.render.bind(this,e)};i.compilePartial=function(e,t){this.partialCache=this.partialCache||{};this.partialCache[e]=t};var f=i.Writer.prototype;f.origCompile=f.compile;f.compile=function(t){var n=f.origCompile.apply(this,[t]);return function(t){var i=Array.prototype.slice.call(arguments);i[0]=e.extend(i[0]||{},c);return n.apply(this,i)}};return i}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){(function(t,i){true?e.exports=i(n(1),n(2)):typeof define==="function"&&define.amd?define(["underscore","backbone"],i):(t.Backbone=t.Backbone||{},t.Backbone.Radio=i(t._,t.Backbone))})(this,function(e,t){"use strict";e="default"in e?e["default"]:e;t="default"in t?t["default"]:t;var n={};n.typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol?"symbol":typeof e};n;var i=t.Radio;var r=t.Radio={};r.VERSION="1.0.4";r.noConflict=function(){t.Radio=i;return this};r.DEBUG=false;r._debugText=function(e,t,n){return e+(n?" on the "+n+" channel":"")+': "'+t+'"'};r.debugLog=function(e,t,n){if(r.DEBUG&&console&&console.warn){console.warn(r._debugText(e,t,n))}};var s=/\s+/;r._eventsApi=function(t,i,r,o){if(!r){return false}var a={};if((typeof r==="undefined"?"undefined":n.typeof(r))==="object"){for(var l in r){var u=t[i].apply(t,[l,r[l]].concat(o));s.test(l)?e.extend(a,u):a[l]=u}return a}if(s.test(r)){var c=r.split(s);for(var f=0,h=c.length;f<h;f++){a[c[f]]=t[i].apply(t,[c[f]].concat(o))}return a}return false};r._callHandler=function(e,t,n){var i=n[0],r=n[1],s=n[2];switch(n.length){case 0:return e.call(t);case 1:return e.call(t,i);case 2:return e.call(t,i,r);case 3:return e.call(t,i,r,s);default:return e.apply(t,n)}};function o(e,t,n,i){var r=e[t];if((!n||n===r.callback||n===r.callback._callback)&&(!i||i===r.context)){delete e[t];return true}}function a(t,n,i,r){t||(t={});var s=n?[n]:e.keys(t);var a=false;for(var l=0,u=s.length;l<u;l++){n=s[l];if(!t[n]){continue}if(o(t,n,i,r)){a=true}}return a}var l={};function u(t){return l[t]||(l[t]=e.bind(r.log,r,t))}e.extend(r,{log:function t(n,i){if(typeof console==="undefined"){return}var r=e.toArray(arguments).slice(2);console.log("["+n+'] "'+i+'"',r)},tuneIn:function e(t){var n=r.channel(t);n._tunedIn=true;n.on("all",u(t));return this},tuneOut:function e(t){var n=r.channel(t);n._tunedIn=false;n.off("all",u(t));delete l[t];return this}});function c(t){return e.isFunction(t)?t:function(){return t}}r.Requests={request:function t(n){var i=e.toArray(arguments).slice(1);var s=r._eventsApi(this,"request",n,i);if(s){return s}var o=this.channelName;var a=this._requests;if(o&&this._tunedIn){r.log.apply(this,[o,n].concat(i))}if(a&&(a[n]||a["default"])){var l=a[n]||a["default"];i=a[n]?i:arguments;return r._callHandler(l.callback,l.context,i)}else{r.debugLog("An unhandled request was fired",n,o)}},reply:function e(t,n,i){if(r._eventsApi(this,"reply",t,[n,i])){return this}this._requests||(this._requests={});if(this._requests[t]){r.debugLog("A request was overwritten",t,this.channelName)}this._requests[t]={callback:c(n),context:i||this};return this},replyOnce:function t(n,i,s){if(r._eventsApi(this,"replyOnce",n,[i,s])){return this}var o=this;var a=e.once(function(){o.stopReplying(n);return c(i).apply(this,arguments)});return this.reply(n,a,s)},stopReplying:function e(t,n,i){if(r._eventsApi(this,"stopReplying",t)){return this}if(!t&&!n&&!i){delete this._requests}else if(!a(this._requests,t,n,i)){r.debugLog("Attempted to remove the unregistered request",t,this.channelName)}return this}};r._channels={};r.channel=function(e){if(!e){throw new Error("You must provide a name for the channel.")}if(r._channels[e]){return r._channels[e]}else{return r._channels[e]=new r.Channel(e)}};r.Channel=function(e){this.channelName=e};e.extend(r.Channel.prototype,t.Events,r.Requests,{reset:function e(){this.off();this.stopListening();this.stopReplying();return this}});var f;var h;var d=[t.Events,r.Requests];e.each(d,function(t){e.each(t,function(t,n){r[n]=function(t){h=e.toArray(arguments).slice(1);f=this.channel(t);return f[n].apply(f,h)}})});r.reset=function(t){var n=!t?this._channels:[this._channels[t]];e.each(n,function(e){e.reset()})};return r})},function(e,t,n){var i,r,s;(function n(o,a){if(typeof t==="object"&&t&&typeof t.nodeName!=="string"){a(t)}else if(true){!(r=[t],i=a,s=typeof i==="function"?i.apply(t,r):i,s!==undefined&&(e.exports=s))}else{o.Mustache={};a(Mustache)}})(this,function e(t){var n=Object.prototype.toString;var i=Array.isArray||function e(t){return n.call(t)==="[object Array]"};function r(e){return typeof e==="function"}function s(e){return i(e)?"array":typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return e!=null&&typeof e==="object"&&t in e}var l=RegExp.prototype.test;function u(e,t){return l.call(e,t)}var c=/\S/;function f(e){return!u(c,e)}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function d(e){return String(e).replace(/[&<>"'\/]/g,function e(t){return h[t]})}var p=/\s*/;var v=/\s+/;var g=/\s*=/;var m=/\s*\}/;var y=/#|\^|\/|>|\{|&|=|!/;function _(e,n){if(!e)return[];var r=[];var s=[];var a=[];var l=false;var u=false;function c(){if(l&&!u){while(a.length)delete s[a.pop()]}else{a=[]}l=false;u=false}var h,d,_;function C(e){if(typeof e==="string")e=e.split(v,2);if(!i(e)||e.length!==2)throw new Error("Invalid tags: "+e);h=new RegExp(o(e[0])+"\\s*");d=new RegExp("\\s*"+o(e[1]));_=new RegExp("\\s*"+o("}"+e[1]))}C(n||t.tags);var x=new k(e);var M,E,S,R,F,T;while(!x.eos()){M=x.pos;S=x.scanUntil(h);if(S){for(var D=0,O=S.length;D<O;++D){R=S.charAt(D);if(f(R)){a.push(s.length)}else{u=true}s.push(["text",R,M,M+1]);M+=1;if(R==="\n")c()}}if(!x.scan(h))break;l=true;E=x.scan(y)||"name";x.scan(p);if(E==="="){S=x.scanUntil(g);x.scan(g);x.scanUntil(d)}else if(E==="{"){S=x.scanUntil(_);x.scan(m);x.scanUntil(d);E="&"}else{S=x.scanUntil(d)}if(!x.scan(d))throw new Error("Unclosed tag at "+x.pos);F=[E,S,M,x.pos];s.push(F);if(E==="#"||E==="^"){r.push(F)}else if(E==="/"){T=r.pop();if(!T)throw new Error('Unopened section "'+S+'" at '+M);if(T[1]!==S)throw new Error('Unclosed section "'+T[1]+'" at '+M)}else if(E==="name"||E==="{"||E==="&"){u=true}else if(E==="="){C(S)}}T=r.pop();if(T)throw new Error('Unclosed section "'+T[1]+'" at '+x.pos);return w(b(s))}function b(e){var t=[];var n,i;for(var r=0,s=e.length;r<s;++r){n=e[r];if(n){if(n[0]==="text"&&i&&i[0]==="text"){i[1]+=n[1];i[3]=n[3]}else{t.push(n);i=n}}}return t}function w(e){var t=[];var n=t;var i=[];var r,s;for(var o=0,a=e.length;o<a;++o){r=e[o];switch(r[0]){case"#":case"^":n.push(r);i.push(r);n=r[4]=[];break;case"/":s=i.pop();s[5]=r[2];n=i.length>0?i[i.length-1][4]:t;break;default:n.push(r)}}return t}function k(e){this.string=e;this.tail=e;this.pos=0}k.prototype.eos=function e(){return this.tail===""};k.prototype.scan=function e(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var i=n[0];this.tail=this.tail.substring(i.length);this.pos+=i.length;return i};k.prototype.scanUntil=function e(t){var n=this.tail.search(t),i;switch(n){case-1:i=this.tail;this.tail="";break;case 0:i="";break;default:i=this.tail.substring(0,n);this.tail=this.tail.substring(n)}this.pos+=i.length;return i};function C(e,t){this.view=e;this.cache={".":this.view};this.parent=t}C.prototype.push=function e(t){return new C(t,this)};C.prototype.lookup=function e(t){var n=this.cache;var i;if(n.hasOwnProperty(t)){i=n[t]}else{var s=this,o,l,u=false;while(s){if(t.indexOf(".")>0){i=s.view;o=t.split(".");l=0;while(i!=null&&l<o.length){if(l===o.length-1)u=a(i,o[l]);i=i[o[l++]]}}else{i=s.view[t];u=a(s.view,t)}if(u)break;s=s.parent}n[t]=i}if(r(i))i=i.call(this.view);return i};function x(){this.cache={}}x.prototype.clearCache=function e(){this.cache={}};x.prototype.parse=function e(t,n){var i=this.cache;var r=i[t];if(r==null)r=i[t]=_(t,n);return r};x.prototype.render=function e(t,n,i){var r=this.parse(t);var s=n instanceof C?n:new C(n);return this.renderTokens(r,s,i,t)};x.prototype.renderTokens=function e(t,n,i,r){var s="";var o,a,l;for(var u=0,c=t.length;u<c;++u){l=undefined;o=t[u];a=o[0];if(a==="#")l=this.renderSection(o,n,i,r);else if(a==="^")l=this.renderInverted(o,n,i,r);else if(a===">")l=this.renderPartial(o,n,i,r);else if(a==="&")l=this.unescapedValue(o,n);else if(a==="name")l=this.escapedValue(o,n);else if(a==="text")l=this.rawValue(o);if(l!==undefined)s+=l}return s};x.prototype.renderSection=function e(t,n,s,o){var a=this;var l="";var u=n.lookup(t[1]);function c(e){return a.render(e,n,s)}if(!u)return;if(i(u)){for(var f=0,h=u.length;f<h;++f){l+=this.renderTokens(t[4],n.push(u[f]),s,o)}}else if(typeof u==="object"||typeof u==="string"||typeof u==="number"){l+=this.renderTokens(t[4],n.push(u),s,o)}else if(r(u)){if(typeof o!=="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,o.slice(t[3],t[5]),c);if(u!=null)l+=u}else{l+=this.renderTokens(t[4],n,s,o)}return l};x.prototype.renderInverted=function e(t,n,r,s){var o=n.lookup(t[1]);if(!o||i(o)&&o.length===0)return this.renderTokens(t[4],n,r,s)};x.prototype.renderPartial=function e(t,n,i){if(!i)return;var s=r(i)?i(t[1]):i[t[1]];if(s!=null)return this.renderTokens(this.parse(s),n,i,s)};x.prototype.unescapedValue=function e(t,n){var i=n.lookup(t[1]);if(i!=null)return i};x.prototype.escapedValue=function e(n,i){var r=i.lookup(n[1]);if(r!=null)return t.escape(r)};x.prototype.rawValue=function e(t){return t[1]};t.name="mustache.js";t.version="2.1.3";t.tags=["{{","}}"];var M=new x;t.clearCache=function e(){return M.clearCache()};t.parse=function e(t,n){return M.parse(t,n)};t.render=function e(t,n,i){if(typeof t!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+s(t)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return M.render(t,n,i)};t.to_html=function e(n,i,s,o){var a=t.render(n,i,s);if(r(o)){o(a)}else{return a}};t.escape=d;t.Scanner=k;t.Context=C;t.Writer=x})},function(e,t,n){var i;var i;(function(t){if(true){e.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var n;if(typeof window!=="undefined"){n=window}else if(typeof global!=="undefined"){n=global}else if(typeof self!=="undefined"){n=self}else{n=this}n.Raven=t()}})(function(){var e,t,n;return function e(t,n,r){function s(a,l){if(!n[a]){if(!t[a]){var u=typeof i=="function"&&i;if(!l&&u)return i(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}var o=typeof i=="function"&&i;for(var a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,n){n=t.exports=i;n.getSerialize=r;function i(e,t,n,i){return JSON.stringify(e,r(t,i),n)}function r(e,t){var n=[],i=[];if(t==null)t=function(e,t){if(n[0]===t)return"[Circular ~]";return"[Circular ~."+i.slice(0,n.indexOf(t)).join(".")+"]"};return function(r,s){if(n.length>0){var o=n.indexOf(this);~o?n.splice(o+1):n.push(this);~o?i.splice(o,Infinity,r):i.push(r);if(~n.indexOf(s))s=t.call(this,r,s)}else n.push(s);return e==null?s:e.call(this,r,s)}}},{}],2:[function(e,t,n){"use strict";function i(e){this.name="RavenConfigError";this.message=e}i.prototype=new Error;i.prototype.constructor=i;t.exports=i},{}],3:[function(e,t,n){"use strict";var i=function(e,t,n){var i=e[t];var r=e;if(!(t in e)){return}var s=t==="warn"?"warning":t;e[t]=function(){var e=[].slice.call(arguments);var t=""+e.join(" ");var o={level:s,logger:"console",extra:{arguments:e}};n&&n(t,o);if(i){Function.prototype.apply.call(i,r,e)}}};t.exports={wrapMethod:i}},{}],4:[function(e,t,n){"use strict";var i=e(6);var r=e(2);var s=e(1);var o=e(3).wrapMethod;var a="source protocol user pass host port path".split(" "),l=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function u(){return+new Date}var c=typeof window!=="undefined"?window:undefined;var f=c&&c.document;function h(){this._hasJSON=!!(typeof JSON==="object"&&JSON.stringify);this._hasDocument=!p(f);this._lastCapturedException=null;this._lastEventId=null;this._globalServer=null;this._globalKey=null;this._globalProject=null;this._globalContext={};this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:true,maxMessageLength:0,stackTraceLimit:50,autoBreadcrumbs:true};this._ignoreOnError=0;this._isRavenInstalled=false;this._originalErrorStackTraceLimit=Error.stackTraceLimit;this._originalConsole=c.console||{};this._originalConsoleMethods={};this._plugins=[];this._startTime=u();this._wrappedBuiltIns=[];this._breadcrumbs=[];this._lastCapturedEvent=null;this._keypressTimeout;this._location=c.location;this._lastHref=this._location&&this._location.href;for(var e in this._originalConsole){this._originalConsoleMethods[e]=this._originalConsole[e]}}h.prototype={VERSION:"3.8.0",debug:false,TraceKit:i,config:function(e,t){var n=this;if(n._globalServer){this._logDebug("error","Error: Raven has already been configured");return n}if(!e)return n;var r=n._globalOptions;if(t){b(t,function(e,t){if(e==="tags"||e==="extra"){n._globalContext[e]=t}else{r[e]=t}})}n.setDSN(e);r.ignoreErrors.push(/^Script error\.?$/);r.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/);r.ignoreErrors=x(r.ignoreErrors);r.ignoreUrls=r.ignoreUrls.length?x(r.ignoreUrls):false;r.whitelistUrls=r.whitelistUrls.length?x(r.whitelistUrls):false;r.includePaths=x(r.includePaths);r.maxBreadcrumbs=Math.max(0,Math.min(r.maxBreadcrumbs||100,100));var s={xhr:true,console:true,dom:true,location:true};var o=r.autoBreadcrumbs;if({}.toString.call(o)==="[object Object]"){o=w(s,o)}else if(o!==false){o=s}r.autoBreadcrumbs=o;i.collectWindowErrors=!!r.collectWindowErrors;return n},install:function(){var e=this;if(e.isSetup()&&!e._isRavenInstalled){i.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)});e._instrumentTryCatch();if(e._globalOptions.autoBreadcrumbs)e._instrumentBreadcrumbs();e._drainPlugins();e._isRavenInstalled=true}Error.stackTraceLimit=e._globalOptions.stackTraceLimit;return this},setDSN:function(e){var t=this,n=t._parseDSN(e),i=n.path.lastIndexOf("/"),r=n.path.substr(1,i);t._dsn=e;t._globalKey=n.user;t._globalSecret=n.pass&&n.pass.substr(1);t._globalProject=n.path.substr(i+1);t._globalServer=t._getGlobalServer(n);t._globalEndpoint=t._globalServer+"/"+r+"api/"+t._globalProject+"/store/"},context:function(e,t,n){if(v(e)){n=t||[];t=e;e=undefined}return this.wrap(e,t).apply(this,n)},wrap:function(e,t,n){var i=this;if(p(t)&&!v(e)){return e}if(v(e)){t=e;e=undefined}if(!v(t)){return t}try{if(t.__raven__){return t}if(t.__raven_wrapper__){return t.__raven_wrapper__}}catch(e){return t}function r(){var r=[],s=arguments.length,o=!e||e&&e.deep!==false;if(n&&v(n)){n.apply(this,arguments)}while(s--)r[s]=o?i.wrap(e,arguments[s]):arguments[s];try{return t.apply(this,r)}catch(t){i._ignoreNextOnError();i.captureException(t,e);throw t}}for(var s in t){if(C(t,s)){r[s]=t[s]}}r.prototype=t.prototype;t.__raven_wrapper__=r;r.__raven__=true;r.__inner__=t;return r},uninstall:function(){i.report.uninstall();this._restoreBuiltIns();Error.stackTraceLimit=this._originalErrorStackTraceLimit;this._isRavenInstalled=false;return this},captureException:function(e,t){if(!_(e)){return this.captureMessage(e,w({trimHeadFrames:1,stacktrace:true},t))}this._lastCapturedException=e;try{var n=i.computeStackTrace(e);this._handleStackInfo(n,t)}catch(t){if(e!==t){throw t}}return this},captureMessage:function(e,t){if(!!this._globalOptions.ignoreErrors.test&&this._globalOptions.ignoreErrors.test(e)){return}var n=w({message:e+""},t);if(t&&t.stacktrace){var r;try{throw new Error(e)}catch(e){r=e}r.name=null;t=w({fingerprint:e,trimHeadFrames:(t.trimHeadFrames||0)+1},t);var s=i.computeStackTrace(r);var o=this._prepareFrames(s,t);n.stacktrace={frames:o.reverse()}}this._send(n);return this},captureBreadcrumb:function(e){var t=w({timestamp:u()/1e3},e);this._breadcrumbs.push(t);if(this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs){this._breadcrumbs.shift()}return this},addPlugin:function(e){var t=[].slice.call(arguments,1);this._plugins.push([e,t]);if(this._isRavenInstalled){this._drainPlugins()}return this},setUserContext:function(e){this._globalContext.user=e;return this},setExtraContext:function(e){this._mergeContext("extra",e);return this},setTagsContext:function(e){this._mergeContext("tags",e);return this},clearContext:function(){this._globalContext={};return this},getContext:function(){return JSON.parse(s(this._globalContext))},setEnvironment:function(e){this._globalOptions.environment=e;return this},setRelease:function(e){this._globalOptions.release=e;return this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;this._globalOptions.dataCallback=v(e)?function(n){return e(n,t)}:e;return this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;this._globalOptions.shouldSendCallback=v(e)?function(n){return e(n,t)}:e;return this},setTransport:function(e){this._globalOptions.transport=e;return this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){if(!this._hasJSON)return false;if(!this._globalServer){if(!this.ravenNotConfiguredError){this.ravenNotConfiguredError=true;this._logDebug("error","Error: Raven has not been configured.")}return false}return true},afterLoad:function(){var e=c.RavenConfig;if(e){this.config(e.dsn,e.config).install()}},showReportDialog:function(e){if(!f)return;e=e||{};var t=e.eventId||this.lastEventId();if(!t){throw new r("Missing eventId")}var n=e.dsn||this._dsn;if(!n){throw new r("Missing DSN")}var i=encodeURIComponent;var s="";s+="?eventId="+i(t);s+="&dsn="+i(n);var o=e.user||this._globalContext.user;if(o){if(o.name)s+="&name="+i(o.name);if(o.email)s+="&email="+i(o.email)}var a=this._getGlobalServer(this._parseDSN(n));var l=f.createElement("script");l.async=true;l.src=a+"/api/embed/error-page/"+s;(f.head||f.body).appendChild(l)},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1;setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var n,i;if(!this._hasDocument)return;t=t||{};e="raven"+e.substr(0,1).toUpperCase()+e.substr(1);if(f.createEvent){n=f.createEvent("HTMLEvents");n.initEvent(e,true,true)}else{n=f.createEventObject();n.eventType=e}for(i in t)if(C(t,i)){n[i]=t[i]}if(f.createEvent){f.dispatchEvent(n)}else{try{f.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(n){t._keypressTimeout=null;if(t._lastCapturedEvent===n)return;t._lastCapturedEvent=n;var i=n.target;var r;try{r=R(i)}catch(e){r="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:r})}},_keypressEventHandler:function(){var e=this,t=1e3;return function(n){var i=n.target,r=i&&i.tagName;if(!r||r!=="INPUT"&&r!=="TEXTAREA"&&!i.isContentEditable)return;var s=e._keypressTimeout;if(!s){e._breadcrumbEventHandler("input")(n)}clearTimeout(s);e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},t)}},_captureUrlChange:function(e,t){var n=E(this._location.href);var i=E(t);var r=E(e);this._lastHref=t;if(n.protocol===i.protocol&&n.host===i.host)t=i.relative;if(n.protocol===r.protocol&&n.host===r.host)e=r.relative;this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_instrumentTryCatch:function(){var e=this;var t=e._wrappedBuiltIns;function n(t){return function(n,i){var r=new Array(arguments.length);for(var s=0;s<r.length;++s){r[s]=arguments[s]}var o=r[0];if(v(o)){r[0]=e.wrap(o)}if(t.apply){return t.apply(this,r)}else{return t(r[0],r[1])}}}var i=this._globalOptions.autoBreadcrumbs;function r(n){var r=c[n]&&c[n].prototype;if(r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")){T(r,"addEventListener",function(t){return function(r,s,o,a){try{if(s&&s.handleEvent){s.handleEvent=e.wrap(s.handleEvent)}}catch(e){}var l;if(i&&i.dom&&(n==="EventTarget"||n==="Node")){if(r==="click"){l=e._breadcrumbEventHandler(r)}else if(r==="keypress"){l=e._keypressEventHandler()}}return t.call(this,r,e.wrap(s,undefined,l),o,a)}},t);T(r,"removeEventListener",function(e){return function(t,n,i,r){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(e){}return e.call(this,t,n,i,r)}},t)}}T(c,"setTimeout",n,t);T(c,"setInterval",n,t);if(c.requestAnimationFrame){T(c,"requestAnimationFrame",function(t){return function(n){return t(e.wrap(n))}},t)}var s=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for(var o=0;o<s.length;o++){r(s[o])}var a=c.jQuery||c.$;if(a&&a.fn&&a.fn.ready){T(a.fn,"ready",function(t){return function(n){return t.call(this,e.wrap(n))}},t)}},_instrumentBreadcrumbs:function(){var e=this;var t=this._globalOptions.autoBreadcrumbs;var n=e._wrappedBuiltIns;function i(t,n){if(t in n&&v(n[t])){T(n,t,function(t){return e.wrap(t)})}}if(t.xhr&&"XMLHttpRequest"in c){var r=XMLHttpRequest.prototype;T(r,"open",function(t){return function(n,i){if(g(i)&&i.indexOf(e._globalKey)===-1){this.__raven_xhr={method:n,url:i,status_code:null}}return t.apply(this,arguments)}},n);T(r,"send",function(t){return function(n){var r=this;function s(){if(r.__raven_xhr&&(r.readyState===1||r.readyState===4)){try{r.__raven_xhr.status_code=r.status}catch(e){}e.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}var o=["onload","onerror","onprogress"];for(var a=0;a<o.length;a++){i(o[a],r)}if("onreadystatechange"in r&&v(r.onreadystatechange)){T(r,"onreadystatechange",function(t){return e.wrap(t,undefined,s)})}else{r.onreadystatechange=s}return t.apply(this,arguments)}},n)}if(t.xhr&&"fetch"in c){T(c,"fetch",function(t){return function(n,i){var r=new Array(arguments.length);for(var s=0;s<r.length;++s){r[s]=arguments[s]}var o="GET";if(r[1]&&r[1].method){o=r[1].method}var a={method:o,url:r[0],status_code:null};e.captureBreadcrumb({type:"http",category:"fetch",data:a});return t.apply(this,r).then(function(e){a.status_code=e.status;return e})}},n)}if(t.dom&&this._hasDocument){if(f.addEventListener){f.addEventListener("click",e._breadcrumbEventHandler("click"),false);f.addEventListener("keypress",e._keypressEventHandler(),false)}else{f.attachEvent("onclick",e._breadcrumbEventHandler("click"));f.attachEvent("onkeypress",e._keypressEventHandler())}}var s=c.chrome;var a=s&&s.app&&s.app.runtime;var l=!a&&c.history&&history.pushState;if(t.location&&l){var u=c.onpopstate;c.onpopstate=function(){var t=e._location.href;e._captureUrlChange(e._lastHref,t);if(u){return u.apply(this,arguments)}};T(history,"pushState",function(t){return function(){var n=arguments.length>2?arguments[2]:undefined;if(n){e._captureUrlChange(e._lastHref,n+"")}return t.apply(this,arguments)}},n)}if(t.console&&"console"in c&&console.log){var h=function(t,n){e.captureBreadcrumb({message:t,level:n.level,category:"console"})};b(["debug","info","warn","error","log"],function(e,t){o(console,t,h)})}},_restoreBuiltIns:function(){var e;while(this._wrappedBuiltIns.length){
e=this._wrappedBuiltIns.shift();var t=e[0],n=e[1],i=e[2];t[n]=i}},_drainPlugins:function(){var e=this;b(this._plugins,function(t,n){var i=n[0];var r=n[1];i.apply(e,[e].concat(r))})},_parseDSN:function(e){var t=l.exec(e),n={},i=7;try{while(i--)n[a[i]]=t[i]||""}catch(t){throw new r("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey){throw new r("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key")}return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");if(e.protocol){t=e.protocol+":"+t}return t},_handleOnErrorStackInfo:function(){if(!this._ignoreOnError){this._handleStackInfo.apply(this,arguments)}},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t});this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(e,t){var n=this;var i=[];if(e.stack&&e.stack.length){b(e.stack,function(e,t){var r=n._normalizeFrame(t);if(r){i.push(r)}});if(t&&t.trimHeadFrames){for(var r=0;r<t.trimHeadFrames&&r<i.length;r++){i[r].in_app=false}}}i=i.slice(0,this._globalOptions.stackTraceLimit);return i},_normalizeFrame:function(e){if(!e.url)return;var t={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};t.in_app=!(!!this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t["function"])||/raven\.(min\.)?js$/.test(t.filename));return t},_processException:function(e,t,n,i,r,s){var o;if(!!this._globalOptions.ignoreErrors.test&&this._globalOptions.ignoreErrors.test(t))return;t+="";if(r&&r.length){n=r[0].filename||n;r.reverse();o={frames:r}}else if(n){o={frames:[{filename:n,lineno:i,in_app:true}]}}if(!!this._globalOptions.ignoreUrls.test&&this._globalOptions.ignoreUrls.test(n))return;if(!!this._globalOptions.whitelistUrls.test&&!this._globalOptions.whitelistUrls.test(n))return;var a=w({exception:{values:[{type:e,value:t,stacktrace:o}]},culprit:n},s);this._send(a)},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message){e.message=k(e.message,t)}if(e.exception){var n=e.exception.values[0];n.value=k(n.value,t)}return e},_getHttpData:function(){if(!this._hasDocument||!f.location||!f.location.href){return}var e={headers:{"User-Agent":navigator.userAgent}};e.url=f.location.href;if(f.referrer){e.headers.Referer=f.referrer}return e},_send:function(e){var t=this._globalOptions;var n={project:this._globalProject,logger:t.logger,platform:"javascript"},i=this._getHttpData();if(i){n.request=i}if(e.trimHeadFrames)delete e.trimHeadFrames;e=w(n,e);e.tags=w(w({},this._globalContext.tags),e.tags);e.extra=w(w({},this._globalContext.extra),e.extra);e.extra["session:duration"]=u()-this._startTime;if(this._breadcrumbs&&this._breadcrumbs.length>0){e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}}if(y(e.tags))delete e.tags;if(this._globalContext.user){e.user=this._globalContext.user}if(t.environment)e.environment=t.environment;if(t.release)e.release=t.release;if(t.serverName)e.server_name=t.serverName;if(v(t.dataCallback)){e=t.dataCallback(e)||e}if(!e||y(e)){return}if(v(t.shouldSendCallback)&&!t.shouldSendCallback(e)){return}this._sendProcessedPayload(e)},_getUuid:function(){return S()},_sendProcessedPayload:function(e,t){var n=this;var i=this._globalOptions;this._lastEventId=e.event_id||(e.event_id=this._getUuid());e=this._trimPacket(e);this._logDebug("debug","Raven about to send:",e);if(!this.isSetup())return;var r={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};if(this._globalSecret){r.sentry_secret=this._globalSecret}var s=e.exception&&e.exception.values[0];this.captureBreadcrumb({category:"sentry",message:s?(s.type?s.type+": ":"")+s.value:e.message,event_id:e.event_id,level:e.level||"error"});var o=this._globalEndpoint;(i.transport||this._makeRequest).call(this,{url:o,auth:r,data:e,options:i,onSuccess:function i(){n._triggerEvent("success",{data:e,src:o});t&&t()},onError:function i(r){n._triggerEvent("failure",{data:e,src:o});r=r||new Error("Raven send failed (no additional details provided)");t&&t(r)}})},_makeRequest:function(e){var t=new XMLHttpRequest;var n="withCredentials"in t||typeof XDomainRequest!=="undefined";if(!n)return;var i=e.url;function r(){if(t.status===200){if(e.onSuccess){e.onSuccess()}}else if(e.onError){e.onError(new Error("Sentry error code: "+t.status))}}if("withCredentials"in t){t.onreadystatechange=function(){if(t.readyState!==4){return}r()}}else{t=new XDomainRequest;i=i.replace(/^https?:/,"");t.onload=r}t.open("POST",i+"?"+M(e.auth));t.send(s(e.data))},_logDebug:function(e){if(this._originalConsoleMethods[e]&&this.debug){Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))}},_mergeContext:function(e,t){if(p(t)){delete this._globalContext[e]}else{this._globalContext[e]=w(this._globalContext[e]||{},t)}}};var d=Object.prototype;function p(e){return e===void 0}function v(e){return typeof e==="function"}function g(e){return d.toString.call(e)==="[object String]"}function m(e){return typeof e==="object"&&e!==null}function y(e){for(var t in e)return false;return true}function _(e){var t=d.toString.call(e);return m(e)&&t==="[object Error]"||t==="[object Exception]"||e instanceof Error}function b(e,t){var n,i;if(p(e.length)){for(n in e){if(C(e,n)){t.call(null,n,e[n])}}}else{i=e.length;if(i){for(n=0;n<i;n++){t.call(null,n,e[n])}}}}function w(e,t){if(!t){return e}b(t,function(t,n){e[t]=n});return e}function k(e,t){return!t||e.length<=t?e:e.substr(0,t)+""}function C(e,t){return d.hasOwnProperty.call(e,t)}function x(e){var t=[],n=0,i=e.length,r;for(;n<i;n++){r=e[n];if(g(r)){t.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"))}else if(r&&r.source){t.push(r.source)}}return new RegExp(t.join("|"),"i")}function M(e){var t=[];b(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))});return t.join("&")}function E(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"";var i=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+i}}function S(){var e=window.crypto||window.msCrypto;if(!p(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);t[3]=t[3]&4095|16384;t[4]=t[4]&16383|32768;var n=function(e){var t=e.toString(16);while(t.length<4){t="0"+t}return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}else{return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}}function R(e){var t=5,n=80,i=[],r=0,s=0,o=" > ",a=o.length,l;while(e&&r++<t){l=F(e);if(l==="html"||r>1&&s+i.length*a+l.length>=n){break}i.push(l);s+=l.length;e=e.parentNode}return i.reverse().join(o)}function F(e){var t=[],n,i,r,s,o;if(!e||!e.tagName){return""}t.push(e.tagName.toLowerCase());if(e.id){t.push("#"+e.id)}n=e.className;if(n&&g(n)){i=n.split(" ");for(o=0;o<i.length;o++){t.push("."+i[o])}}var a=["type","name","title","alt"];for(o=0;o<a.length;o++){r=a[o];s=e.getAttribute(r);if(s){t.push("["+r+'="'+s+'"]')}}return t.join("")}function T(e,t,n,i){var r=e[t];e[t]=n(r);if(i){i.push([e,t,r])}}if(typeof __DEV__!=="undefined"&&__DEV__){h.utils={isUndefined:p,isFunction:v,isString:g,isObject:m,isEmptyObject:y,isError:_,each:b,objectMerge:w,truncate:k,hasKey:C,joinRegExp:x,urlencode:M,uuid4:S,htmlTreeAsString:R,htmlElementAsString:F,parseUrl:E,fill:T}}h.prototype.setUser=h.prototype.setUserContext;h.prototype.setReleaseContext=h.prototype.setRelease;t.exports=h},{1:1,2:2,3:3,6:6}],5:[function(e,t,n){"use strict";var i=e(4);var r=window.Raven;var s=new i;s.noConflict=function(){window.Raven=r;return s};s.afterLoad();t.exports=s},{4:4}],6:[function(e,t,n){"use strict";var i={collectWindowErrors:true,debug:false};var r=[].slice;var s="?";var o=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function a(){if(typeof document==="undefined")return"";return document.location.href}i.report=function e(){var t=[],n=null,l=null,u=null;function c(e){m();t.push(e)}function f(e){for(var n=t.length-1;n>=0;--n){if(t[n]===e){t.splice(n,1)}}}function h(){y();t=[]}function d(e,n){var s=null;if(n&&!i.collectWindowErrors){return}for(var o in t){if(t.hasOwnProperty(o)){try{t[o].apply(null,[e].concat(r.call(arguments,2)))}catch(e){s=e}}}if(s){throw s}}var p,v;function g(e,t,n,r,l){var c=null;if(u){i.computeStackTrace.augmentStackTraceWithInitialElement(u,t,n,e);_()}else if(l){c=i.computeStackTrace(l);d(c,true)}else{var f={url:t,line:n,column:r};var h=undefined;var v=e;var g;if({}.toString.call(e)==="[object String]"){var g=e.match(o);if(g){h=g[1];v=g[2]}}f.func=s;c={name:h,message:v,url:a(),stack:[f]};d(c,true)}if(p){return p.apply(this,arguments)}return false}function m(){if(v){return}p=window.onerror;window.onerror=g;v=true}function y(){if(!v){return}window.onerror=p;v=false;p=undefined}function _(){var e=u,t=n;n=null;u=null;l=null;d.apply(null,[e,false].concat(t))}function b(e,t){var s=r.call(arguments,1);if(u){if(l===e){return}else{_()}}var o=i.computeStackTrace(e);u=o;l=e;n=s;setTimeout(function(){if(l===e){_()}},o.incomplete?2e3:0);if(t!==false){throw e}}b.subscribe=c;b.unsubscribe=f;b.uninstall=h;return b}();i.computeStackTrace=function e(){function t(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function n(e){return t(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function r(e){if(typeof e.stack==="undefined"||!e.stack)return;var t=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,n=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,i=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=e.stack.split("\n"),o=[],l,u,c=/^(.*) is undefined$/.exec(e.message);for(var f=0,h=r.length;f<h;++f){if(l=t.exec(r[f])){var d=l[2]&&l[2].indexOf("native")!==-1;u={url:!d?l[2]:null,func:l[1]||s,args:d?[l[2]]:[],line:l[3]?+l[3]:null,column:l[4]?+l[4]:null}}else if(l=i.exec(r[f])){u={url:l[2],func:l[1]||s,args:[],line:+l[3],column:l[4]?+l[4]:null}}else if(l=n.exec(r[f])){u={url:l[3],func:l[1]||s,args:l[2]?l[2].split(","):[],line:l[4]?+l[4]:null,column:l[5]?+l[5]:null}}else{continue}if(!u.func&&u.line){u.func=s}o.push(u)}if(!o.length){return null}if(!o[0].column&&typeof e.columnNumber!=="undefined"){o[0].column=e.columnNumber+1}return{name:e.name,message:e.message,url:a(),stack:o}}function o(e,t,n,i){var r={url:t,line:n};if(r.url&&r.line){e.incomplete=false;if(!r.func){r.func=s}if(e.stack.length>0){if(e.stack[0].url===r.url){if(e.stack[0].line===r.line){return false}else if(!e.stack[0].line&&e.stack[0].func===r.func){e.stack[0].line=r.line;return false}}}e.stack.unshift(r);e.partial=true;return true}else{e.incomplete=true}return false}function l(e,t){var n=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,r=[],c={},f=false,h,d,p;for(var v=l.caller;v&&!f;v=v.caller){if(v===u||v===i.report){continue}d={url:null,func:s,line:null,column:null};if(v.name){d.func=v.name}else if(h=n.exec(v.toString())){d.func=h[1]}if(typeof d.func==="undefined"){try{d.func=h.input.substring(0,h.input.indexOf("{"))}catch(e){}}if(c[""+v]){f=true}else{c[""+v]=true}r.push(d)}if(t){r.splice(0,t)}var g={name:e.name,message:e.message,url:a(),stack:r};o(g,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description);return g}function u(e,t){var n=null;t=t==null?0:+t;try{n=r(e);if(n){return n}}catch(e){if(i.debug){throw e}}try{n=l(e,t+1);if(n){return n}}catch(e){if(i.debug){throw e}}return{name:e.name,message:e.message,url:a()}}u.augmentStackTraceWithInitialElement=o;u.computeStackTraceFromStackProp=r;return u}();t.exports=i},{}]},{},[5])(5)})},function(e,t,n){var i,r;!(i=[n(3),n(1),n(8),n(17)],r=function(e,t,n,i){"use strict";var r;try{r=true;window.postMessage({toString:function(){r=false}},"*")}catch(e){}var s=function(e){this.targetOrigin=e};s.prototype.outgoingQueue=[];s.prototype.outgoingWindow=null;s.prototype.outgoingChannel=null;s.prototype.outgoingDeferreds={};s.prototype.incomingChannel=null;var o=1;s.prototype.runOutgoingQueue=function(){var e=this.outgoingQueue.length;var t;for(var n=0;n<e;n++){t=this.outgoingQueue.shift();this.postMessage.apply(this,t)}};s.prototype.setReqResState=function(e,t){var n=this.outgoingDeferreds[t.uid];if(!n){return}n[e].apply(n,t.value);delete this.outgoingDeferreds[t.uid]};s.prototype.postMessage=function(e,n,i,s){var l={messenger:e,name:n,args:t.map(i,a),uid:o++};if(!this.outgoingWindow.postMessage||!this.outgoingReady){this.outgoingQueue.push(t.toArray(arguments));return}if(s){this.outgoingDeferreds[l.uid]=s}if(!r){l=JSON.stringify(l)}this.outgoingWindow.postMessage(l,this.targetOrigin)};s.prototype.listener=function(i){var s=this;if(i.origin!==s.targetOrigin){return}if(i.source!==s.outgoingWindow){return}var o=i.data;if(!r){o=JSON.parse(o)}var a=o.messenger;var l=o.name;var u=o.args;var c=o.uid;if(!a||!l){return}var f;switch(a){case"vent":f=s.incomingChannel.vent.trigger;break;case"commands":f=s.incomingChannel.commands.execute;break;case"reqres":f=s.incomingChannel.reqres.request;break;default:return}if(!u){u=[]}u.unshift(l);try{var h=f.apply(s.incomingChannel[a],u);if(a==="reqres"){e.when(h).done(function(){var e=t.toArray(arguments);s.outgoingChannel.commands.execute("reqres:resolve",{value:e,uid:c})}).fail(function(){var e=t.toArray(arguments);s.outgoingChannel.commands.execute("reqres:reject",{value:e,uid:c})})}}catch(e){n.captureException(e);console.error(e.stack);if(a==="reqres"){s.outgoingChannel.commands.execute("reqres:reject",{value:[e.message],uid:c})}}};s.prototype.readyPing=null;s.prototype.outgoingReady=false;s.prototype.numPings=0;s.prototype.maxPings=120;s.prototype.pingInterval=500;s.prototype.setup=function(i,s,o){var a=this;var l=e.Deferred();a.incomingChannel=i;a.incomingChannel.commands.setHandlers({"reqres:resolve":t.partial(a.setReqResState.bind(a),"resolve"),"reqres:reject":t.partial(a.setReqResState.bind(a),"reject")});a.incomingChannel.vent.once("ready",function(){a.outgoingReady=true});a.boundListener=a.listener.bind(a);window.addEventListener("message",a.boundListener);a.outgoingWindow=s;a.outgoingChannel=o;a.outgoingChannel.vent.trigger=function(){var e=t.toArray(arguments);var n=e.shift();a.postMessage("vent",n,e);return a.outgoingChannel.vent};a.outgoingChannel.commands.execute=function(){var e=t.toArray(arguments);var n=e.shift();a.postMessage("commands",n,e)};a.outgoingChannel.reqres.request=function(){var n=t.toArray(arguments);var i=n.shift();var r=e.Deferred();a.postMessage("reqres",i,n,r);return r.promise()};var u={messenger:"vent",name:"ready"};if(!r){u=JSON.stringify(u)}a.readyPing=setInterval(function(){if(++a.numPings>a.maxPings){clearInterval(a.readyPing);a.readyPing=null;l.reject()}if(a.outgoingReady){clearInterval(a.readyPing);a.readyPing=null;a.runOutgoingQueue();l.resolve()}try{a.outgoingWindow.postMessage(u,a.targetOrigin)}catch(e){n.captureMessage("Exception during handshake: "+e.message,{level:"info"})}},a.pingInterval);return l.promise()};s.prototype.destroy=function(){clearInterval(this.readyPing);window.removeEventListener("message",this.boundListener)};function a(n){switch(typeof n){case"boolean":case"undefined":case"number":case"string":case"PixelArray":case"ImageData":case"Blob":case"File":return n;case"function":if(window.W_DEBUG){console.warn("Removed function from postMessage message:",n)}return null}if(t.isNull(n)){return n}if(t.isArray(n)){return t.map(n,a)}if(e.isPlainObject(n)){if(n.overrideMimeType&&n.readyState&&n.status){return null}if(window.W_DEBUG&&i.isCyclic(n)){console.warn("Tried to clone cyclic object in postMessage",n)}return t.chain(n).clone().each(l).value()}if(window.W_DEBUG){console.warn("Removed the following object from postMessage message:",n)}return null}function l(e,t,n){n[t]=a(e)}return s}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(1),n(13)],r=function(e,t){"use strict";var n=function(){var n=this.incoming={vent:new t.Wreqr.EventAggregator,reqres:new t.Wreqr.RequestResponse,commands:new t.Wreqr.Commands};var i=this.outgoing={vent:new t.Wreqr.EventAggregator,reqres:new t.Wreqr.RequestResponse,commands:new t.Wreqr.Commands};this.on=e.bind(n.vent.on,n.vent);this.off=e.bind(n.vent.off,n.vent);this.once=e.bind(n.vent.once,n.vent);this.reqres={request:this.request,setHandler:e.bind(n.reqres.setHandler,n.reqres),setHandlers:e.bind(n.reqres.setHandlers,n.reqres),removeHandler:e.bind(n.reqres.removeHandler,n.reqres),removeHandlers:e.bind(n.reqres.removeHandlers,n.reqres),removeAllHandlers:e.bind(n.reqres.removeAllHandlers,n.reqres)};this.commands={execute:this.execute,setHandler:e.bind(n.commands.setHandler,n.commands),setHandlers:e.bind(n.commands.setHandlers,n.commands),removeHandler:e.bind(n.commands.removeHandler,n.commands),removeHandlers:e.bind(n.commands.removeHandlers,n.commands),removeAllHandlers:e.bind(n.commands.removeAllHandlers,n.commands)}};n.prototype.trigger=function(){return this.outgoing.vent.trigger.apply(this.outgoing.vent,arguments)};n.prototype.request=function(){return this.outgoing.reqres.request.apply(this.outgoing.reqres,arguments)};n.prototype.execute=function(){return this.outgoing.commands.execute.apply(this.outgoing.commands,arguments)};n.prototype.ajax=function(){Array.prototype.unshift.call(arguments,"ajax:request");return this.request.apply(this,arguments)};n.prototype.RPC=function(){Array.prototype.unshift.call(arguments,"ajax:rpc");return this.request.apply(this,arguments)};return n}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[],r=function(){return{EVENTS:{DOCUMENT_READY:"documentReady",DOCUMENT_RESIZED:"documentSizeChanged",AREA_TEXT_EDITING_START:"startedEditingAreaText",AREA_TEXT_EDITING_END:"finishedEditingAreaText",TEXT_EDITING_START:"startedEditingText",TEXT_EDITING_END:"finishedEditingText",TEXT_EDITING_TOOLBAR_UPDATE:"updateToolbarStates",SUBNAV_SHOWN:"navShown",SUBNAV_HIDDEN:"navHidden",NAV_CLICKED:"navClicked",NAV_PREVIOUS_PAGE_CLICKED:"navPreviousPageClicked",NAV_NEXT_PAGE_CLICKED:"navNextPageClicked",PAGE_RENDER_FAIL:"renderPageFailed",SITE_INIT_FAIL:"initializeEditorFailed",EDITING_POST_TITLE:"startedEditingPostTitle",EDITED_POST_TITLE:"finishedEditingPostTitle",INITIALIZE_BLOG_POST_EDITOR_FAILED:"initializeBlogPostEditorFailed"},COMMANDS:{},REQUESTS:{}}}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(3),n(1),n(4),n(5),n(10),n(9),n(11),n(26)],r=function(e,t,n,i,r,s,o,a){var l=new r;var u=new s(window.bridgeTarget);var c;var f=true;var h={initializeInterface:function(){e("body").prepend(i.render(a));e(".preview-controls").hide();e("#preview-target").hide();e("#te-popin-button").on("click",function(){window.close()})},render:function(t){var i=e.Deferred();c.src="about:blank";c.onload=function(){c.onload=undefined;var r=c.contentWindow.document;r.open();r.write(t);r.close();c.contentWindow.inPreview=true;e(r).on("click",'a[href^="/editor/apps/preview.php?"], a[href^="/theme_browser/preview.php?"], a[href^="/store"]',function(e){var t=this.getAttribute("href");var n={};e.preventDefault();e.stopPropagation();if(t.match(/^\/store\/(?:c|p)[0-9]+/)){l.execute("preview:navigate",{page_id:123456,route:t||""})}else{t=t.split("?")[1];t.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]});l.execute("preview:navigate",n)}});e(r).on("click","a[href]",function(e){e.preventDefault();e.stopPropagation()});e(r).on("mouseover","a[href]",function(e){if((this.getAttribute("href")||"").match(/^https?/)){this.title=n.utl("javascript.site.preview.main_1")}});l.trigger("preview:load");if(window.opener&&f){f=false;setTimeout(function(){e("#preview-target").fadeIn(600,function(){e(".preview-controls").fadeIn()})},300)}i.resolve()};return i.promise()},update:function(t,n){var i=c.contentWindow.document;var r=e(i).find("head");var s=i.createElement("style");s.setAttribute("id","preview-css");if(s.styleSheet){s.styleSheet.cssText=t}else{s.appendChild(i.createTextNode(t))}r.find("#preview-css").remove();r.append(s);if(n){r.find("link.preview-font").remove();r.append(n)}}};e(function(){if(window.opener){h.initializeInterface()}c=document.getElementById("preview-target");u.setup(l.incoming,window.opener||window.parent,l.outgoing);l.trigger(o.EVENTS.DOCUMENT_READY);l.reqres.setHandlers({"preview:render":h.render,"preview:update":h.update})})}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(2),n(6),n(20),n(22),n(21),n(14),n(15),n(16)],r=function(e){var t={},n=e.RelationalModel.extend;e.Relational.store.addModelScope(t);e.RelationalModel.extend=function(e,i){var r=n.apply(this,arguments);var s=e._class;if(s){s=s.split(".");s=s[s.length-1];t[s]=r}return r};e.Wreqr.Handlers.prototype.removeHandlers=function(e){for(var t=0;t<e.length;t++){this.removeHandler(e[t])}};return e}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(5),n(19)],r=function(e,t){t.Renderer.render=function(t,n){if(!t){var i=new Error("Cannot render the template since it's false, null or undefined.");i.name="TemplateNotFoundError";throw i}if(typeof t==="function"){return t(n)}return e.render(t,n)};return t}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(3),n(1),n(2)],r=function(e,t,n){n.preventClose=function(i){var r=this;if(!this.defer){this.defer=e.Deferred();if(n.preventClose.preventer){var s=n.preventClose.preventer();if(s&&s.promise){this.defer=s}else if(s){this.defer.resolve()}else{this.defer.reject()}this.defer.fail(function(){delete n.preventClose.preventer})}else{this.defer.reject()}this.defer.always(function(){t.defer(function(){delete r.defer})})}this.defer.fail(function(){i()})};n.preventClose.ifModelChanged=function(n,i){if(!n.hasChangedDeepSinceSavepoint())return false;var r=e.Deferred();if(i){i(function(){r.reject()},function(){r.resolve()})}else{t.defer(function(){if(confirm("Are you sure? You'll lose your current changes.")){r.reject()}else{r.resolve()}})}return r.promise()};var i=n.View.prototype.constructor;n.View.prototype.constructor=function(){i.apply(this,arguments);if(this.preventClose){n.preventClose.preventer=t.bind(this.preventClose,this)}}}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(3),n(1),n(4),n(2),n(24)],r=function(e,t,n,i,r){var s=i.sync;t.extend(i,{sync:function(e,n,r){var o;if(!n.rpc){return s.apply(i,arguments)}switch(e){case"delete":e="destroy";case"create":case"update":case"patch":o=r.attrs||n.toJSON(r);break;case"read":if(n.rpc&&e=="read"){r=t.extend({},t.omit(r,"data"),r.data);o=t.extend({filter:[]},r);var a=n.keydefs||n.model.prototype.keydefs;t.each(a.PRIMARY,function(e){if(n.get(e)!=undefined&&!t.findWhere(o.filter,{property:e})){o.filter.push({property:e,value:n.get(e)})}})}break;default:console.warn(e+" params not defined for this model ",n);o=r.attrs||n.toJSON()}if(n.rpc[e]){var l=n.rpc[e](o);l.done(function(e){return e.success===false?r.error(e):r.success(e)});l.fail(function(e){return r.error(e)});return l}console.warn(e+" not defined for this model ",n)}});n.ns=function(e,t){var t=t||window;var n=e.split(".");n.forEach(function(e){if(typeof e!=="string"){t=e}else{if(!t[e]){t[e]={}}t=t[e]}});return t};n.setup_rpc=function(i){var s=n.ns(i.namespace);var o=new r.JsonRpc(i.url);var a=function(n,i,r,s,a){return function(){var s=e.Deferred();var l=t.toArray(arguments);if(l.length<i){console.error("Wrong number of args for "+n);return}r=!!r;l.unshift(n);l.push({success:s.resolve,failure:s.reject,scope:s,secure:r,standalone:a});o.call.apply(o,l);return s}};t.each(i.actions,function(e,i){var r=n.ns(i,s);t.each(e,function(e){r[e.name]=a(i+"::"+e.name,e.len,e.secure,e.multiple,e.standalone)})})};n.setup_model_rpc=function(e){var i=n.ns(e.rpc_namespace);var r=n.ns(e.model_namespace);var s=n.ns(e.collection_namespace);var o=n.ns(e.bootstrap_namespace);t.extend(r,e.models);t.extend(s,e.collections);t.extend(o,e.bootstrap);t.each(s,function(e,t){if(i[t]){s[t].rpc=i[t]}});t.each(r,function(e,n){if(i[n]){r[n].rpc=i[n];var o=r[n].relations;t.each(o,function(e){if(s[e.relatedModel]){e.collectionType=e.relatedModel+"Collection"}})}})}}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n(4)],r=function(e){var t={htmlDecode:function(e){var t=document.createElement("div");t.innerHTML=e;return t.childNodes.length===0?"":t.childNodes[0].nodeValue},isIE:function(){return/(MSIE|Trident)/.test(navigator.userAgent)},isEdge:function(){return/(edge)/.test(navigator.userAgent.toLowerCase())},isChrome:function(){return/(Chrome)/.test(navigator.userAgent)},getURLParameter:function(e,t){var n=t||window.location.search.substring(1);var i=n.split("&");for(var r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]==e){return decodeURIComponent(s[1])}}return""},splitName:function(e){var t;if(/^[^\s]*\s[^\s]*\s?$/i.test(e)){return e.split(" ")}else if(t=e.match(/^([^\s]*\s[^\s]\.?)\s(.*)\s?$/i)){return t.slice(1)}else if(t=e.match(/^(.*)\s([^\s]*)\s(jr|sr|ii|iii|iv|v|vi|vii|viii|ix|x)\.?\s?$/i)){return t.slice(1)}else if(t=e.match(/^([^\s]*\s[^\s]*)\s(.*)\s?$/i)){return t.slice(1)}else{return[e,""]}},isValidEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getSiteDomain:function(){var t=false;if(e.Location.custom_domain){t=e.Location.custom_domain}else if(e.Location.weebly_subdomain){t=e.Location.weebly_subdomain+".weebly.com"}return t},generateTimeInterval:function(e,t){var n,i,r=[],e=e||12,t=t||30;for(n=0;n<=23;n++){for(i=0;i<60;i+=t){var s=("00"+i).slice(-2),o=n,a="";if(e===12){a="am";if(n===0){o=12}else if(n===12){o=n;a="pm"}else if(n>12){o=n-e;a="pm"}}else{o=("00"+n).slice(-2)}r.push(o+":"+s+" "+a)}}return r},hasValidUrl:function(e){return/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e)},isCyclic:function(e){try{JSON.stringify(e,function(e,t){if(typeof t==="object"){return t}return undefined})}catch(e){if(e instanceof TypeError){return true}throw e}return false},setDropEffect:function(e){var t;if(e.originalEvent){e=e.originalEvent}if(e.dataTransfer){t=["move","linkMove"].indexOf(e.dataTransfer.effectAllowed)!==-1;e.dataTransfer.dropEffect=t?"move":"copy"}},getCookie:function(e){var t="; "+document.cookie;var n=t.split("; "+e+"=");if(n.length>=2){return unescape(n.pop().split(";").shift())}return null},setCookie:function(e,t,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);i="; expires="+r.toUTCString()}document.cookie=e+"="+t+i+"; path=/"},eraseCookie:function(e){this.setCookie(e,"",-1)},roundNumber:function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},getNestedValue:function(e,t,n){var i=e;for(var r=0;r<t.length;r++){var s=t[r];if(s in i){i=i[s]}else{return n}}return i},isProtocolSecure:function(){return document.location.protocol=="https:"},mapObjectValues:function(e,t){var n=[e];while(n.length){var i=n[0];var r=Object.keys(i);r.forEach(function(e){if(_.isObject(i[e])){n.push(i[e])}else{i[e]=t(i[e]);if(_.isUndefined(i[e])){delete i[e]}}});n.shift()}return e},getFrontDoorOnboardingLink:function(e){return e?"/app/front-door/users/"+e+"/getting-started":"/"}};return t}.apply(t,i),r!==undefined&&(e.exports=r))},function(e,t,n){(function(t,i){if(true){var r=n(1);var s=n(2);e.exports=i(r,s)}else if(typeof define==="function"&&define.amd){define(["underscore","backbone"],i)}})(this,function(e,t){"option strict";t.ChildViewContainer=function(e,t){var n=function(e){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e;if(e.model){this._indexByModel[e.model.cid]=n}if(t){this._indexByCustom[t]=n}this._updateLength();return this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;if(e.model){delete this._indexByModel[e.model.cid]}t.any(this._indexByCustom,function(e,t){if(e===n){delete this._indexByCustom[t];return true}},this);delete this._views[n];this._updateLength();return this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){if(t.isFunction(i[e])){i[e].apply(i,n||[])}})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views);var i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}});return n}(t,e);return t.ChildViewContainer})},function(e,t,n){(function(t,i){if(true){var r=n(1);var s=n(2);var o=n(23);var a=n(18);e.exports=i(r,s,o,a)}else if(typeof define==="function"&&define.amd){define(["underscore","backbone","backbone.wreqr","backbone.babysitter"],i)}})(this,function(e,t){var n=function(e,t,n){"use strict";var i={};t.Marionette=i;i.$=t.$;var r=Array.prototype.slice;function s(e,t){var n=new Error(e);n.name=t||"Error";throw n}i.extend=t.Model.extend;i.getOption=function(e,t){if(!e||!t){return}var n;if(e.options&&t in e.options&&e.options[t]!==undefined){n=e.options[t]}else{n=e[t]}return n};i.normalizeMethods=function(e){var t={},i;n.each(e,function(e,r){i=e;if(!n.isFunction(i)){i=this[i]}if(!i){return}t[r]=i},this);return t};i.normalizeUIKeys=function(e,t){if(typeof e==="undefined"){return}n.each(n.keys(e),function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;if(n.match(i)){e[n.replace(i,function(e){return t[e.slice(4)]})]=e[n];delete e[n]}});return e};i.triggerMethod=function(){var e=/(^|:)(\w)/gi;function t(e,t,n){return n.toUpperCase()}var i=function(i){var r="on"+i.replace(e,t);var s=this[r];if(n.isFunction(this.trigger)){this.trigger.apply(this,arguments)}if(n.isFunction(s)){return s.apply(this,n.tail(arguments))}};return i}();i.MonitorDOMRefresh=function(e){function t(e){e._isShown=true;r(e)}function i(e){e._isRendered=true;r(e)}function r(e){if(e._isShown&&e._isRendered&&s(e)){if(n.isFunction(e.triggerMethod)){e.triggerMethod("dom:refresh")}}}function s(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)});e.listenTo(e,"render",function(){i(e)})}}(document.documentElement);(function(e){"use strict";function t(e,t,i,r){var o=r.split(/\s+/);n.each(o,function(n){var r=e[n];if(!r){s("Method '"+n+"' was configured as an event handler, but does not exist.")}e.listenTo(t,i,r)})}function i(e,t,n,i){e.listenTo(t,n,i)}function r(e,t,i,r){var s=r.split(/\s+/);n.each(s,function(n){var r=e[n];e.stopListening(t,i,r)})}function o(e,t,n,i){e.stopListening(t,n,i);
}function a(e,t,i,r,s){if(!t||!i){return}if(n.isFunction(i)){i=i.call(e)}n.each(i,function(i,o){if(n.isFunction(i)){r(e,t,o,i)}else{s(e,t,o,i)}})}e.bindEntityEvents=function(e,n,r){a(e,n,r,i,t)};e.unbindEntityEvents=function(e,t,n){a(e,t,n,o,r)}})(i);i.Callbacks=function(){this._deferred=i.$.Deferred();this._callbacks=[]};n.extend(i.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t});this._deferred.done(function(n,i){if(t){n=t}e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=i.$.Deferred();this._callbacks=[];n.each(e,function(e){this.add(e.cb,e.ctx)},this)}});i.Controller=function(e){this.triggerMethod=i.triggerMethod;this.options=e||{};if(n.isFunction(this.initialize)){this.initialize(this.options)}};i.Controller.extend=i.extend;n.extend(i.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e));this.unbind()}});i.Region=function(e){this.options=e||{};this.el=i.getOption(this,"el");if(!this.el){s("An 'el' must be specified for a region.","NoElError")}if(this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}};n.extend(i.Region,{buildRegion:function(e,t){var i=n.isString(e);var r=n.isString(e.selector);var o=n.isUndefined(e.regionType);var a=n.isFunction(e);if(!a&&!i&&!r){s("Region must be specified as a Region type, a selector string or an object with selector property")}var l,u;if(i){l=e}if(e.selector){l=e.selector;delete e.selector}if(a){u=e}if(!a&&o){u=t}if(e.regionType){u=e.regionType;delete e.regionType}if(i||a){e={}}e.el=l;var c=new u(e);if(e.parentEl){c.getEl=function(t){var i=e.parentEl;if(n.isFunction(i)){i=i()}return i.find(t)}}return c}});n.extend(i.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el);var r=e!==this.currentView;if(r){this.close()}e.render();i.triggerMethod.call(this,"before:show",e);i.triggerMethod.call(e,"before:show");if(r||t){this.open(e)}this.currentView=e;i.triggerMethod.call(this,"show",e);i.triggerMethod.call(e,"show")},ensureEl:function(){if(!this.$el||this.$el.length===0){this.$el=this.getEl(this.el)}},getEl:function(e){return i.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;if(!e||e.isClosed){return}if(e.close){e.close()}else if(e.remove){e.remove()}i.triggerMethod.call(this,"close",e);delete this.currentView},attachView:function(e){this.currentView=e},reset:function(){this.close();delete this.$el}});i.Region.extend=i.extend;i.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={};e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};n.each(e,function(e,r){if(n.isString(e)){e={selector:e}}if(e.selector){e=n.defaults({},e,t)}var s=this.addRegion(r,e);i[r]=s},this);return i},addRegion:function(t,i){var r;var s=n.isObject(i);var o=n.isString(i);var a=!!i.selector;if(o||s&&a){r=e.Region.buildRegion(i,e.Region)}else if(n.isFunction(i)){r=e.Region.buildRegion(i,e.Region)}else{r=i}this._store(t,r);this.triggerMethod("region:add",t,r);return r},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t;this._setLength()},_remove:function(e,t){t.close();delete this._regions[e];this._setLength();this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions);var i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}});return t}(i);i.TemplateCache=function(e){this.templateId=e};n.extend(i.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];if(!t){t=new i.TemplateCache(e);this.templateCaches[e]=t}return t.load()},clear:function(){var e;var t=r.call(arguments);var n=t.length;if(n>0){for(e=0;e<n;e++){delete this.templateCaches[t[e]]}}else{this.templateCaches={}}}});n.extend(i.TemplateCache.prototype,{load:function(){if(this.compiledTemplate){return this.compiledTemplate}var e=this.loadTemplate(this.templateId);this.compiledTemplate=this.compileTemplate(e);return this.compiledTemplate},loadTemplate:function(e){var t=i.$(e).html();if(!t||t.length===0){s("Could not find template: '"+e+"'","NoTemplateError")}return t},compileTemplate:function(e){return n.template(e)}});i.Renderer={render:function(e,t){if(!e){s("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError")}var n;if(typeof e==="function"){n=e}else{n=i.TemplateCache.get(e)}return n(t)}};i.View=t.View.extend({constructor:function(e){n.bindAll(this,"render");if(n.isObject(this.behaviors)){new i.Behaviors(this)}this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e);this.events=this.normalizeUIKeys(n.result(this,"events"));t.View.prototype.constructor.apply(this,arguments);i.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},triggerMethod:i.triggerMethod,normalizeMethods:i.normalizeMethods,getTemplate:function(){return i.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=i.getOption(this,"templateHelpers");if(n.isFunction(t)){t=t.call(this)}return n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui");return i.normalizeUIKeys(e,t)},configureTriggers:function(){if(!this.triggers){return}var e={};var t=this.normalizeUIKeys(n.result(this,"triggers"));n.each(t,function(t,i){var r=n.isObject(t);var s=r?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault;var i=e.stopPropagation;var o=r?t.preventDefault:n;var a=r?t.stopPropagation:i;if(o&&n){n.apply(e)}if(a&&i){i.apply(e)}}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,l)}},this);return e},delegateEvents:function(e){this._delegateDOMEvents(e);i.bindEntityEvents(this,this.model,i.getOption(this,"modelEvents"));i.bindEntityEvents(this,this.collection,i.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events;if(n.isFunction(e)){e=e.call(this)}var i={};var r=n.result(this,"behaviorEvents")||{};var s=this.configureTriggers();n.extend(i,r,e,s);t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e);i.unbindEntityEvents(this,this.model,i.getOption(this,"modelEvents"));i.unbindEntityEvents(this,this.collection,i.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(this.isClosed){return}var e=Array.prototype.slice.call(arguments);var t=this.triggerMethod.apply(this,["before:close"].concat(e));if(t===false){return}this.isClosed=true;this.triggerMethod.apply(this,["close"].concat(e));this.unbindUIElements();this.remove()},bindUIElements:function(){if(!this.ui){return}if(!this._uiBindings){this._uiBindings=this.ui}var e=n.result(this,"_uiBindings");this.ui={};n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)},unbindUIElements:function(){if(!this.ui||!this._uiBindings){return}n.each(this.ui,function(e,t){delete this.ui[t]},this);this.ui=this._uiBindings;delete this._uiBindings}});i.ItemView=i.View.extend({constructor:function(){i.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};if(this.model){e=this.model.toJSON()}else if(this.collection){e={items:this.collection.toJSON()}}return e},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate();var n=i.Renderer.render(t,e);this.$el.html(n);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){if(this.isClosed){return}this.triggerMethod("item:before:close");i.View.prototype.close.apply(this,arguments);this.triggerMethod("item:closed")}});i.CollectionView=i.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage();i.View.prototype.constructor.apply(this,arguments);this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=true},endBuffering:function(){this.isBuffering=false;this.appendBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerShowBufferedChildren:function(){if(this._isShown){n.each(this._bufferedChildren,function(e){i.triggerMethod.call(e,"show")});this._bufferedChildren=[]}},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView);this.listenTo(this.collection,"remove",this.removeItemView);this.listenTo(this.collection,"reset",this.render)}},addChildView:function(e,t,n){this.closeEmptyView();var i=this.getItemView(e);var r=this.collection.indexOf(e);this.addItemView(e,i,r)},onShowCalled:function(){this.children.each(function(e){i.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=false;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();if(!this.isEmpty(this.collection)){this.showCollection()}else{this.showEmptyView()}this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t);this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=true;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){if(this._showingEmptyView){this.closeChildren();delete this._showingEmptyView}},getEmptyView:function(){return i.getOption(this,"emptyView")},getItemView:function(e){var t=i.getOption(this,"itemView");if(!t){s("An `itemView` must be specified","NoItemViewError")}return t},addItemView:function(e,t,r){var s=i.getOption(this,"itemViewOptions");if(n.isFunction(s)){s=s.call(this,e,r)}var o=this.buildItemView(e,t,s);this.addChildViewEventForwarding(o);this.triggerMethod("before:item:added",o);this.children.add(o);this.renderItemView(o,r);if(this._isShown&&!this.isBuffering){i.triggerMethod.call(o,"show")}this.triggerMethod("after:item:added",o);return o},addChildViewEventForwarding:function(e){var t=i.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var s=r.call(arguments);var o=s[0];var a=this.normalizeMethods(this.getItemEvents());s[0]=t+":"+o;s.splice(1,0,e);if(typeof a!=="undefined"&&n.isFunction(a[o])){a[o].apply(this,s)}i.triggerMethod.apply(this,s)},this)},getItemEvents:function(){if(n.isFunction(this.itemEvents)){return this.itemEvents.call(this)}return this.itemEvents},renderItemView:function(e,t){e.render();this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var r=n.extend({model:e},i);return new t(r)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t);this.checkEmpty()},removeChildView:function(e){if(e){this.stopListening(e);if(e.close){e.close()}else if(e.remove){e.remove()}this.children.remove(e)}this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||this.collection.length===0},checkEmpty:function(){if(this.isEmpty(this.collection)){this.showEmptyView()}},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,n){if(e.isBuffering){e.elBuffer.appendChild(t.el);e._bufferedChildren.push(t)}else{e.$el.append(t.el)}},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){if(this.isClosed){return}this.triggerMethod("collection:before:close");this.closeChildren();this.triggerMethod("collection:closed");i.View.prototype.close.apply(this,arguments)},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this);this.checkEmpty()}});i.CompositeView=i.CollectionView.extend({constructor:function(){i.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView);this.listenTo(this.collection,"remove",this.removeItemView);this.listenTo(this.collection,"reset",this._renderChildren)}})},getItemView:function(e){var t=i.getOption(this,"itemView")||this.constructor;if(!t){s("An `itemView` must be specified","NoItemViewError")}return t},serializeData:function(){var e={};if(this.model){e=this.model.toJSON()}return e},render:function(){this.isRendered=true;this.isClosed=false;this.resetItemViewContainer();this.triggerBeforeRender();var e=this.renderModel();this.$el.html(e);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){if(this.isRendered){this.triggerMethod("composite:collection:before:render");i.CollectionView.prototype._renderChildren.call(this);this.triggerMethod("composite:collection:rendered")}},renderModel:function(){var e={};e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return i.Renderer.render(t,e)},appendBuffer:function(e,t){var n=this.getItemViewContainer(e);n.append(t)},appendHtml:function(e,t,n){if(e.isBuffering){e.elBuffer.appendChild(t.el);e._bufferedChildren.push(t)}else{var i=this.getItemViewContainer(e);i.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e){return e.$itemViewContainer}var t;var r=i.getOption(e,"itemViewContainer");if(r){var o=n.isFunction(r)?r.call(this):r;t=e.$(o);if(t.length<=0){s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}}else{t=e.$el}e.$itemViewContainer=t;return t},resetItemViewContainer:function(){if(this.$itemViewContainer){delete this.$itemViewContainer}}});i.Layout=i.ItemView.extend({regionType:i.Region,constructor:function(e){e=e||{};this._firstRender=true;this._initializeRegions(e);i.ItemView.prototype.constructor.call(this,e)},render:function(){if(this.isClosed){this._initializeRegions()}if(this._firstRender){this._firstRender=false}else if(!this.isClosed){this._reInitializeRegions()}return i.ItemView.prototype.render.apply(this,arguments)},close:function(){if(this.isClosed){return}this.regionManager.close();i.ItemView.prototype.close.apply(this,arguments)},addRegion:function(e,t){var n={};n[e]=t;return this._buildRegions(n)[e]},addRegions:function(e){this.regions=n.extend({},this.regions,e);return this._buildRegions(e)},removeRegion:function(e){delete this.regions[e];return this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this;var n={regionType:i.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager();if(n.isFunction(this.regions)){t=this.regions(e)}else{t=this.regions||{}}this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new i.RegionManager;this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t;this.trigger("region:add",e,t)});this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e];this.trigger("region:remove",e,t)})}});i.Behavior=function(e,t){function n(t,n){this.view=n;this.defaults=e.result(this,"defaults")||{};this.options=e.extend({},this.defaults,t);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}e.extend(n.prototype,{initialize:function(){},triggerMethod:i.triggerMethod});e.extend(n,{extend:t.View.extend});return n}(n,t);i.Behaviors=function(e,t){function n(e){this.behaviors=n.parseBehaviors(e,e.behaviors);n.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement"])}var i={setElement:function(e,n){e.apply(this,t.tail(arguments,2));t.each(n,function(e){e.$el=this.$el},this)},onShow:function(n,i){var r=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["show"].concat(r))});if(t.isFunction(n)){n.apply(this,r)}},onClose:function(n,i){var r=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["close"].concat(r))});if(t.isFunction(n)){n.apply(this,r)}},bindUIElements:function(e,n){e.apply(this);t.invoke(n,e)},unbindUIElements:function(e,n){e.apply(this);t.invoke(n,e)},triggerMethod:function(e,n){var i=t.tail(arguments,2);e.apply(this,i);t.each(n,function(t){e.apply(t,i)})},delegateEvents:function(n,i){var r=t.tail(arguments,2);n.apply(this,r);t.each(i,function(t){e.bindEntityEvents(this,this.model,e.getOption(t,"modelEvents"));e.bindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(n,i){var r=t.tail(arguments,2);n.apply(this,r);t.each(i,function(t){e.unbindEntityEvents(this,this.model,e.getOption(t,"modelEvents"));e.unbindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(n,i){var r={};var s=t.result(this,"ui");t.each(i,function(n,i){var o={};var a=t.result(n,"events")||{};var l=t.result(n,"ui");var u=t.extend({},s,l);a=e.normalizeUIKeys(a,u);t.each(t.keys(a),function(e){var r=new Array(i+2).join(" ");var s=e+r;var l=t.isFunction(a[e])?a[e]:n[a[e]];o[s]=t.bind(l,n)});r=t.extend(r,o)});return r}};t.extend(n,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,i){if(e.behaviorClass){return e.behaviorClass}return t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(e,i){return t.map(i,function(t,i){var r=n.getBehaviorClass(t,i);return new r(t,e)})},wrap:function(e,n,r){t.each(r,function(r){e[r]=t.partial(i[r],e[r],n)})}});return n}(i,n);i.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments);this.options=e||{};var n=i.getOption(this,"appRoutes");var r=this._getController();this.processAppRoutes(r,n)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},processAppRoutes:function(e,t){if(!t){return}var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)},_getController:function(){return i.getOption(this,"controller")},_addAppRoute:function(e,t,i){var r=e[i];if(!r){s("Method '"+i+"' was not found on the controller")}this.route(t,i,n.bind(r,e))}});i.Application=function(e){this._initRegionManager();this._initCallbacks=new i.Callbacks;this.vent=new t.Wreqr.EventAggregator;this.commands=new t.Wreqr.Commands;this.reqres=new t.Wreqr.RequestResponse;this.submodules={};n.extend(this,e);this.triggerMethod=i.triggerMethod};n.extend(i.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e);this._initCallbacks.run(e,this);this.triggerMethod("initialize:after",e);this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=i.Module.getClass(t);var s=r.call(arguments);s.unshift(this);return n.create.apply(n,s)},_initRegionManager:function(){this._regionManager=new i.RegionManager;this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t});this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}});i.Application.extend=i.extend;i.Module=function(e,t,r){this.moduleName=e;this.options=n.extend({},this.options,r);this.initialize=r.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=t;this.startWithParent=true;this.triggerMethod=i.triggerMethod;if(n.isFunction(this.initialize)){this.initialize(this.options,e,t)}};i.Module.extend=i.extend;n.extend(i.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){if(this._isInitialized){return}n.each(this.submodules,function(t){if(t.startWithParent){t.start(e)}});this.triggerMethod("before:start",e);this._initializerCallbacks.run(e,this);this._isInitialized=true;this.triggerMethod("start",e)},stop:function(){if(!this._isInitialized){return}this._isInitialized=false;i.triggerMethod.call(this,"before:stop");n.each(this.submodules,function(e){e.stop()});this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();i.triggerMethod.call(this,"stop")},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,r){if(!e){return}var s=n.flatten([this,this.app,t,i,i.$,n,r]);e.apply(this,s)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new i.Callbacks;this._finalizerCallbacks=new i.Callbacks}});n.extend(i.Module,{create:function(e,t,i){var s=e;var o=r.call(arguments);o.splice(0,3);t=t.split(".");var a=t.length;var l=[];l[a-1]=i;n.each(t,function(t,n){var r=s;s=this._getModule(r,t,e,i);this._addModuleDefinition(r,s,l[n],o)},this);return s},_getModule:function(e,t,i,r,s){var o=n.extend({},r);var a=this.getClass(r);var l=e[t];if(!l){l=new a(t,i,o);e[t]=l;e.submodules[t]=l}return l},getClass:function(e){var t=i.Module;if(!e){return t}if(e.prototype instanceof t){return e}return e.moduleClass||t},_addModuleDefinition:function(e,t,n,i){var r=this._getDefine(n);var s=this._getStartWithParent(n,t);if(r){t.addDefinition(r,i)}this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var r;if(n.isFunction(e)&&e.prototype instanceof i.Module){r=t.constructor.prototype.startWithParent;return n.isUndefined(r)?true:r}if(n.isObject(e)){r=e.startWithParent;return n.isUndefined(r)?true:r}return true},_getDefine:function(e){if(n.isFunction(e)&&!(e.prototype instanceof i.Module)){return e}if(n.isObject(e)){return e.define}return null},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n;if(!t.startWithParent||!!t.startWithParentIsConfigured){return}t.startWithParentIsConfigured=true;e.addInitializer(function(e){if(t.startWithParent){t.start(e)}})}});return i}(this,t,e);return t.Marionette})},function(e,t,n){(function(t){if(true){e.exports=t(n(1),n(2))}else if(typeof define=="function"&&define.amd){define(["underscore","backbone"],t)}else if(typeof _!=="undefined"&&typeof Backbone!=="undefined"){var i=Backbone.PageableCollection;var r=t(_,Backbone);Backbone.PageableCollection.noConflict=function(){Backbone.PageableCollection=i;return r}}})(function(e,t){"use strict";var n=e.extend;var i=e.omit;var r=e.clone;var s=e.each;var o=e.pick;var a=e.contains;var l=e.isEmpty;var u=e.pairs;var c=e.invert;var f=e.isArray;var h=e.isFunction;var d=e.isObject;var p=e.keys;var v=e.isUndefined;var g=e.result;var m=Math.ceil;var y=Math.floor;var _=Math.max;var b=t.Collection.prototype;function w(t,n){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t){throw new TypeError("`"+n+"` must be a finite integer")}return t}function k(e){var t,n,i,r,s={},o=decodeURIComponent;var a=e.split("&");for(var l=0,u=a.length;l<u;l++){var c=a[l];t=c.split("="),n=t[0],i=t[1]||true;n=o(n),i=o(i),r=s[n];if(f(r))r.push(i);else if(r)s[n]=[r,i];else s[n]=i}return s}function C(e,t,n){var i=e._events[t];if(i&&i.length){var r=i[i.length-1];var s=r.callback;r.callback=function(){try{s.apply(this,arguments);n()}catch(e){throw e}finally{r.callback=s}}}else n()}var x=/[\s'"]/g;var M=/[<>\s'"]/g;var E=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){b.constructor.apply(this,arguments);t=t||{};var i=this.mode=t.mode||this.mode||S.mode;var s=n({},S.queryParams,this.queryParams,t.queryParams||{});s.directions=n({},S.queryParams.directions,this.queryParams.directions,s.directions||{});this.queryParams=s;var o=this.state=n({},S.state,this.state,t.state||{});o.currentPage=o.currentPage==null?o.firstPage:o.currentPage;if(!f(e))e=e?[e]:[];if(i!="server"&&o.totalRecords==null&&!l(e)){o.totalRecords=e.length}this.switchMode(i,n({fetch:false,resetState:false,models:e},t));var a=t.comparator;if(o.sortKey&&!a){this.setSorting(o.sortKey,o.order,t)}if(i!="server"){var u=this.fullCollection;if(a&&t.full){this.comparator=null;u.comparator=a}if(t.full)u.sort();if(e&&!l(e)){this.reset([].slice.call(e),n({silent:true},t));this.getPage(o.currentPage);e.splice.apply(e,[0,e.length].concat(this.models))}}this._initState=r(this.state)},_makeFullCollection:function(e,n){var i=["url","model","sync","comparator"];var r=this.constructor.prototype;var s,o,a;var l={};for(s=0,o=i.length;s<o;s++){a=i[s];if(!v(r[a])){l[a]=r[a]}}var u=new(t.Collection.extend(l))(e,n);for(s=0,o=i.length;s<o;s++){a=i[s];if(this[a]!==r[a]){u[a]=this[a]}}return u},_makeCollectionEventHandler:function(e,t){return function i(o,a,l,u){var c=e._handlers;s(p(c),function(n){var i=c[n];e.off(n,i);t.off(n,i)});var f=r(e.state);var h=f.firstPage;var d=h===0?f.currentPage:f.currentPage-1;var g=f.pageSize;var y=d*g,_=y+g;if(o=="add"){var b,w,k,x,u=u||{};if(l==t){w=t.indexOf(a);if(w>=y&&w<_){x=e;b=k=w-y}}else{b=e.indexOf(a);w=y+b;x=t;var k=!v(u.at)?u.at+y:w}if(!u.onRemove){++f.totalRecords;delete u.onRemove}e.state=e._checkState(f);if(x){x.add(a,n({},u||{},{at:k}));var M=b>=g?a:!v(u.at)&&k<_&&e.length>g?e.at(g):null;if(M){C(l,o,function(){e.remove(M,{onAdd:true})})}}}if(o=="remove"){if(!u.onAdd){if(!--f.totalRecords){f.totalRecords=null;f.totalPages=null}else{var E=f.totalPages=m(f.totalRecords/g);f.lastPage=h===0?E-1:E||h;if(f.currentPage>E)f.currentPage=f.lastPage}e.state=e._checkState(f);var S,R=u.index;if(l==e){if(S=t.at(_)){C(e,o,function(){e.push(S,{onRemove:true})})}t.remove(a)}else if(R>=y&&R<_){if(S=t.at(_-1)){C(e,o,function(){e.push(S,{onRemove:true})})}e.remove(a)}}else delete u.onAdd}if(o=="reset"){u=l;l=a;if(l==e&&u.from==null&&u.to==null){var F=t.models.slice(0,y);var T=t.models.slice(y+e.models.length);t.reset(F.concat(e.models).concat(T),u)}else if(l==t){if(!(f.totalRecords=t.models.length)){f.totalRecords=null;f.totalPages=null}if(e.mode=="client"){f.lastPage=f.currentPage=f.firstPage}e.state=e._checkState(f);e.reset(t.models.slice(y,_),n({},u,{parse:false}))}}if(o=="sort"){u=l;l=a;if(l===t){e.reset(t.models.slice(y,_),n({},u,{parse:false}))}}s(p(c),function(n){var i=c[n];s([e,t],function(e){e.on(n,i);var t=e._events[n]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode;var n=this.links;var i=e.totalRecords;var r=e.pageSize;var s=e.currentPage;var o=e.firstPage;var a=e.totalPages;if(i!=null&&r!=null&&s!=null&&o!=null&&(t=="infinite"?n:true)){i=w(i,"totalRecords");r=w(r,"pageSize");s=w(s,"currentPage");o=w(o,"firstPage");if(r<1){throw new RangeError("`pageSize` must be >= 1")}a=e.totalPages=m(i/r);if(o<0||o>1){throw new RangeError("`firstPage must be 0 or 1`")}e.lastPage=o===0?_(0,a-1):a||o;if(t=="infinite"){if(!n[s+""]){throw new RangeError("No link found for page "+s)}}else if(s<o||a>0&&(o?s>a:s>=a)){throw new RangeError("`currentPage` must be firstPage <= currentPage "+(o?">":">=")+" totalPages if "+o+"-based. Got "+s+".")}}return e},setPageSize:function(e,t){e=w(e,"pageSize");t=t||{first:false};var r=this.state;var s=m(r.totalRecords/e);var o=s?_(r.firstPage,y(s*(r.firstPage?r.currentPage:r.currentPage+1)/r.totalPages)):r.firstPage;r=this.state=this._checkState(n({},r,{pageSize:e,currentPage:t.first?r.firstPage:o,totalPages:s}));return this.getPage(r.currentPage,i(t,["first"]))},switchMode:function(t,o){if(!a(["server","client","infinite"],t)){throw new TypeError('`mode` must be one of "server", "client" or "infinite"')}o=o||{fetch:true,resetState:true};var l=this.state=o.resetState?r(this._initState):this._checkState(n({},this.state));this.mode=t;var u=this;var c=this.fullCollection;var f=this._handlers=this._handlers||{},h;if(t!="server"&&!c){c=this._makeFullCollection(o.models||[],o);c.pageableCollection=this;this.fullCollection=c;var d=this._makeCollectionEventHandler(this,c);s(["add","remove","reset","sort"],function(t){f[t]=h=e.bind(d,{},t);u.on(t,h);c.on(t,h)});c.comparator=this._fullComparator}else if(t=="server"&&c){s(p(f),function(e){h=f[e];u.off(e,h);c.off(e,h)});delete this._handlers;this._fullComparator=c.comparator;delete this.fullCollection}if(t=="infinite"){var v=this.links={};var g=l.firstPage;var y=m(l.totalRecords/l.pageSize);var b=g===0?_(0,y-1):y||g;for(var w=l.firstPage;w<=b;w++){v[w]=this.url}}else if(this.links)delete this.links;return o.fetch?this.fetch(i(o,"fetch","resetState")):this},hasPrevious:function(){var e=this.state;var t=e.currentPage;if(this.mode!="infinite")return t>e.firstPage;return!!this.links[t-1]},hasNext:function(){var e=this.state;var t=this.state.currentPage;if(this.mode!="infinite")return t<e.lastPage;return!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var r=this.mode,s=this.fullCollection;t=t||{fetch:false};var o=this.state,a=o.firstPage,u=o.currentPage,c=o.lastPage,f=o.pageSize;var h=e;switch(e){case"first":h=a;break;case"prev":h=u-1;break;case"next":h=u+1;break;case"last":h=c;break;default:h=w(e,"index")}this.state=this._checkState(n({},o,{currentPage:h}));t.from=u,t.to=h;var d=(a===0?h:h-1)*f;var p=s&&s.length?s.models.slice(d,d+f):[];if((r=="client"||r=="infinite"&&!l(p))&&!t.fetch){this.reset(p,i(t,"fetch"));return this}if(r=="infinite")t.url=this.links[h];return this.fetch(i(t,"fetch"))},getPageByOffset:function(e,t){if(e<0){throw new RangeError("`offset must be > 0`")}e=w(e);var n=y(e/this.state.pageSize);if(this.state.firstPage!==0)n++;if(n>this.state.lastPage)n=this.state.lastPage;return this.getPage(n,t)},sync:function(e,i,r){var s=this;if(s.mode=="infinite"){var o=r.success;var a=s.state.currentPage;r.success=function(e,t,i){var l=s.links;var u=s.parseLinks(e,n({xhr:i},r));if(u.first)l[s.state.firstPage]=u.first;if(u.prev)l[a-1]=u.prev;if(u.next)l[a+1]=u.next;if(o)o(e,t,i)}}return(b.sync||t.sync).call(s,e,i,r)},parseLinks:function(e,t){var n={};var i=t.xhr.getResponseHeader("Link");if(i){var r=["first","prev","next"];s(i.split(","),function(e){var t=e.split(";");var i=t[0].replace(M,"");var o=t.slice(1);s(o,function(e){var t=e.split("=");var s=t[0].replace(x,"");var o=t[1].replace(x,"");
if(s=="rel"&&a(r,o))n[o]=i})})}return n},parse:function(e,t){var i=this.parseState(e,r(this.queryParams),r(this.state),t);if(i)this.state=this._checkState(n({},this.state,i));return this.parseRecords(e,t)},parseState:function(t,n,o,a){if(t&&t.length===2&&d(t[0])&&f(t[1])){var l=r(o);var h=t[0];s(u(i(n,"directions")),function(t){var n=t[0],i=t[1];var r=h[i];if(!v(r)&&!e.isNull(r))l[n]=h[i]});if(h.order){l.order=c(n.directions)[h.order]*1}return l}},parseRecords:function(e,t){if(e&&e.length===2&&d(e[0])&&f(e[1])){return e[1]}return e},fetch:function(e){e=e||{};var t=this._checkState(this.state);var s=this.mode;if(s=="infinite"&&!e.url){e.url=this.links[t.currentPage]}var a=e.data||{};var l=g(e,"url")||g(this,"url")||"";var c=l.indexOf("?");if(c!=-1){n(a,k(l.slice(c+1)));l=l.slice(0,c)}e.url=l;e.data=a;var f=this.mode=="client"?o(this.queryParams,"sortKey","order"):i(o(this.queryParams,p(S.queryParams)),"directions");var d,m,y,_,w=u(f),C=r(this);for(d=0;d<w.length;d++){m=w[d],y=m[0],_=m[1];_=h(_)?_.call(C):_;if(t[y]!=null&&_!=null){a[_]=t[y]}}if(t.sortKey&&t.order){a[f.order]=this.queryParams.directions[t.order+""]}else if(!t.sortKey)delete a[f.order];var x=u(i(this.queryParams,p(S.queryParams)));for(d=0;d<x.length;d++){m=x[d];_=m[1];_=h(_)?_.call(C):_;if(_!=null)a[m[0]]=_}if(s!="server"){var M=this,E=this.fullCollection;var R=e.success;e.success=function(t,i,r){r=r||{};if(v(e.silent))delete r.silent;else r.silent=e.silent;var o=t.models;if(s=="client")E.reset(o,r);else{E.add(o,n({at:E.length},n(r,{parse:false})));M.trigger("reset",M,r)}if(R)R(t,i,r)};return b.fetch.call(this,n({},e,{silent:true}))}return b.fetch.call(this,e)},_makeComparator:function(e,t,n){var i=this.state;e=e||i.sortKey;t=t||i.order;if(!e||!t)return;if(!n)n=function(e,t){return e.get(t)};return function(i,r){var s=n(i,e),o=n(r,e),a;if(t===1)a=s,s=o,o=a;if(s===o)return 0;else if(s<o)return-1;return 1}},setSorting:function(t,i,r){var s=this.state;s.sortKey=t;s.order=i=i||s.order;var o=this.fullCollection;var a=false,l=false;if(!t)a=l=true;var u=this.mode;r=n({side:u=="client"?u:"server",full:true},r);var c=this._makeComparator(t,i,r.sortValue);var f=r.full,h=r.side;if(h=="client"){if(f){if(o)o.comparator=c;a=true}else{this.comparator=c;l=true}}else if(h=="server"&&!f){this.comparator=c}if(a)this.comparator=null;if(l&&o)o.comparator=null;this.fetchOptions=e.extend({},this.fetchOptions,{sort:[{property:t,direction:i>0?"ASC":"DESC"}]});return this}});var S=E.prototype;return E})},function(e,t,n){var i,r,s;(function(o,a){if(true){!(r=[t,n(2),n(1)],i=a,s=typeof i==="function"?i.apply(t,r):i,s!==undefined&&(e.exports=s))}else if(typeof t!=="undefined"){a(t,require("backbone"),require("underscore"))}else{a(o,o.Backbone,o._)}})(this,function(e,t,n){"use strict";t.Relational={showWarnings:true};t.Semaphore={_class:"Backbone.Semaphore",_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable){throw new Error("Max permits acquired")}else{this._permitsUsed++}},release:function(){if(this._permitsUsed===0){throw new Error("All permits released")}else{this._permitsUsed--}},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e){throw new Error("Available permits cannot be less than used permits")}this._permitsAvailable=e}};t.BlockingQueue=function(){this._queue=[]};n.extend(t.BlockingQueue.prototype,t.Semaphore,{_class:"Backbone.BlockingQueue",_queue:null,add:function(e){if(this.isBlocked()){this._queue.push(e)}else{e()}},process:function(){var e=this._queue;this._queue=[];while(e&&e.length){e.shift()()}},block:function(){this.acquire()},unblock:function(){this.release();if(!this.isBlocked()){this.process()}},isBlocked:function(){return this.isLocked()}});t.Relational.eventQueue=new t.BlockingQueue;t.Store=function(){this._collections=[];this._reverseRelations=[];this._orphanRelations=[];this._subModels=[];this._modelScopes=[e]};n.extend(t.Store.prototype,t.Events,{_class:"Backbone.Store",initializeRelation:function(e,i,r){var s=!n.isString(i.type)?i.type:t[i.type]||this.getObjectByName(i.type);if(s&&s.prototype instanceof t.Relation){new s(e,i,r)}else{t.Relational.showWarnings&&typeof console!=="undefined"&&console.warn("Relation=%o; missing or invalid relation type!",i)}},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=n.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){n.find(this._subModels,function(t){return n.each(t.subModels||[],function(n,i){var r=this.getObjectByName(n);if(e===r){t.superModelType._subModels[i]=e;e._superModel=t.superModelType;e._subModelTypeValue=i;e._subModelTypeAttribute=t.superModelType.prototype.subModelTypeAttribute;return true}},this)},this)},addReverseRelation:function(e){var t=n.any(this._reverseRelations,function(t){return n.all(e||[],function(e,n){return e===t[n]})});if(!t&&e.model&&e.type){this._reverseRelations.push(e);this._addRelation(e.model,e);this.retroFitRelation(e)}},addOrphanRelation:function(e){var t=n.any(this._orphanRelations,function(t){return n.all(e||[],function(e,n){return e===t[n]})});if(!t&&e.model&&e.type){this._orphanRelations.push(e)}},processOrphanRelations:function(){n.each(this._orphanRelations.slice(0),function(e){var i=t.Relational.store.getObjectByName(e.relatedModel);if(i){this.initializeRelation(null,e);this._orphanRelations=n.without(this._orphanRelations,e)}},this)},_addRelation:function(e,t){if(!e.prototype.relations){e.prototype.relations=[]}e.prototype.relations.push(t);n.each(e._subModels||[],function(e){this._addRelation(e,t)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,false);t&&t.each(function(t){if(!(t instanceof e.model)){return}new e.type(t,e)},this)},getCollection:function(e,i){if(e instanceof t.RelationalModel){e=e.constructor}var r=e;while(r._superModel){r=r._superModel}var s=n.find(this._collections,function(e){return e.model===r});if(!s&&i!==false){s=this._createCollection(r)}return s},getObjectByName:function(e){var t=e.split("."),i=null;n.find(this._modelScopes,function(e){i=n.reduce(t||[],function(e,t){return e?e[t]:undefined},e);if(i&&i!==e){return true}},this);return i},_createCollection:function(e){var n;if(e instanceof t.RelationalModel){e=e.constructor}if(e.prototype instanceof t.RelationalModel){n=new t.Collection;n.model=e;this._collections.push(n)}return n},resolveIdForItem:function(e,i){var r=n.isString(i)||n.isNumber(i)?i:null;if(r===null){if(i instanceof t.RelationalModel){r=i.id}else if(n.isObject(i)){r=e.prototype._getNewId(i)}}if(!r&&r!==0){r=null}return r},find:function(e,t){var n=this.resolveIdForItem(e,t),i=this.getCollection(e);if(i){var r=i.get(n);if(r instanceof e){return r}}return null},register:function(e){var t=this.getCollection(e);if(t){var n=e.collection;t.add(e);e.collection=n}},checkId:function(e,n){var i=this.getCollection(e),r=i&&i.get(n);if(r&&e!==r){if(t.Relational.showWarnings&&typeof console!=="undefined"){console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",r,e)}throw new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")}},update:function(e){var t=this.getCollection(e);if(!t.contains(e)){this.register(e)}t._onModelEvent("change:"+e.idAttribute,e,t);e.trigger("relational:change:id",e,t)},unregister:function(e){var i,r;if(e instanceof t.Model){i=this.getCollection(e);r=[e]}else if(e instanceof t.Collection){i=this.getCollection(e.model);r=n.clone(e.models)}else{i=this.getCollection(e);r=n.clone(i.models)}n.each(r,function(e){this.stopListening(e);n.invoke(e.getRelations(),"stopListening")},this);if(n.contains(this._collections,e)){i.reset([])}else{n.each(r,function(e){if(i.get(e)){i.remove(e)}else{i.trigger("relational:remove",e,i)}},this)}},reset:function(){this.stopListening();n.each(this._collections,function(e){this.unregister(e)},this);this._collections=[];this._subModels=[];this._modelScopes=[e]}});t.Relational.store=new t.Store;t.Relation=function(e,i,r){this.instance=e;i=n.isObject(i)?i:{};this.reverseRelation=n.defaults(i.reverseRelation||{},this.options.reverseRelation);this.options=n.defaults(i,this.options,t.Relation.prototype.options);this.reverseRelation.type=!n.isString(this.reverseRelation.type)?this.reverseRelation.type:t[this.reverseRelation.type]||t.Relational.store.getObjectByName(this.reverseRelation.type);this.key=this.options.key;this.keySource=this.options.keySource||this.key;this.keyDestination=this.options.keyDestination||this.keySource||this.key;this.model=this.options.model||this.instance.constructor;this.relatedModel=this.options.relatedModel;if(n.isFunction(this.relatedModel)&&!(this.relatedModel.prototype instanceof t.RelationalModel)){this.relatedModel=n.result(this,"relatedModel")}if(n.isString(this.relatedModel)){this.relatedModel=t.Relational.store.getObjectByName(this.relatedModel)}if(!this.checkPreconditions()){return}if(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key){t.Relational.store.addReverseRelation(n.defaults({isAutoRelation:true,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation))}if(e){var s=this.keySource;if(s!==this.key&&typeof this.instance.get(this.key)==="object"){s=this.key}this.setKeyContents(this.instance.get(s));this.relatedCollection=t.Relational.store.getCollection(this.relatedModel);if(this.keySource!==this.key){delete this.instance.attributes[this.keySource]}this.instance._relations[this.key]=this;this.initialize(r);if(this.options.autoFetch){this.instance.fetchRelated(this.key,n.isObject(this.options.autoFetch)?this.options.autoFetch:{})}this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}};t.Relation.extend=t.Model.extend;n.extend(t.Relation.prototype,t.Events,t.Semaphore,{_class:"Backbone.Relation",options:{createModels:true,includeInJSON:true,isAutoRelation:false,autoFetch:false,parse:false},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,i=this.key,r=this.model,s=this.relatedModel,o=t.Relational.showWarnings&&typeof console!=="undefined";if(!r||!i||!s){o&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,r,i,s);return false}if(!(r.prototype instanceof t.RelationalModel)){o&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e);return false}if(!(s.prototype instanceof t.RelationalModel)){o&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,s);return false}if(this instanceof t.HasMany&&this.reverseRelation.type===t.HasMany){o&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this);return false}if(e&&n.keys(e._relations).length){var a=n.find(e._relations,function(e){return e.key===i},this);if(a){o&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,i,e,a);return false}}return true},setRelated:function(e){this.related=e;this.instance.attributes[this.key]=e},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){var t=[];var i=!n.isUndefined(e)?[e]:this.related&&(this.related.models||[this.related]);n.each(i||[],function(e){n.each(e.getRelations()||[],function(e){if(this._isReverseRelation(e)){t.push(e)}},this)},this);return t},destroy:function(){this.stopListening();if(this instanceof t.HasOne){this.setRelated(null)}else if(this instanceof t.HasMany){this.setRelated(this._prepareCollection())}n.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}});t.HasOne=t.Relation.extend({_class:"Backbone.HasOne",options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var t=this.findRelated(e);this.setRelated(t);n.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var t=null;e=n.defaults({parse:this.options.parse},e);if(this.keyContents instanceof this.relatedModel){t=this.keyContents}else if(this.keyContents||this.keyContents===0){var i=n.defaults({create:this.options.createModels},e);t=this.relatedModel.findOrCreate(this.keyContents,i)}if(t){this.keyId=null}return t},setKeyContents:function(e){this.keyContents=e;this.keyId=t.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,i,r){if(this.isLocked()){return}this.acquire();r=r?n.clone(r):{};var s=n.isUndefined(r.__related),o=s?this.related:r.__related;if(s){this.setKeyContents(i);var a=this.findRelated(r);this.setRelated(a)}if(o&&this.related!==o){n.each(this.getReverseRelations(o),function(e){e.removeRelated(this.instance,null,r)},this)}n.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,r)},this);if(!r.silent&&this.related!==o){var l=this;this.changed=true;t.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,r,true);l.changed=false})}this.release()},tryAddRelated:function(e,t,n){if((this.keyId||this.keyId===0)&&e.id===this.keyId){this.addRelated(e,n);this.keyId=null}},addRelated:function(e,t){var i=this;e.queue(function(){if(e!==i.related){var r=i.related||null;i.setRelated(e);i.onChange(i.instance,e,n.defaults({__related:r},t))}})},removeRelated:function(e,t,i){if(!this.related){return}if(e===this.related){var r=this.related||null;this.setRelated(null);this.onChange(this.instance,e,n.defaults({__related:r},i))}}});t.HasMany=t.Relation.extend({_class:"Backbone.HasMany",collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:t.Collection,collectionKey:true,collectionOptions:{}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);this.collectionType=this.options.collectionType;if(n.isFunction(this.collectionType)&&this.collectionType!==t.Collection&&!(this.collectionType.prototype instanceof t.Collection)){this.collectionType=n.result(this,"collectionType")}if(n.isString(this.collectionType)){var i=this.collectionType;this.collectionType=t.Relational.store.getObjectByName(this.collectionType)}if(!this.collectionType){if(i&&t.Relational.showWarnings&&typeof console!=="undefined"){console.warn("`collectionType` of "+i+" not found, using Backbone.Collection in its place.")}this.collectionType=t.Collection}if(this.collectionType!==t.Collection&&!(this.collectionType.prototype instanceof t.Collection)){throw new Error("`collectionType` must inherit from Backbone.Collection")}var r=this.findRelated(e);this.setRelated(r)},_prepareCollection:function(e){if(this.related){this.stopListening(this.related)}if(!e||!(e instanceof t.Collection)){var i=n.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,i)}e.model=this.relatedModel;if(this.options.collectionKey){var r=this.options.collectionKey===true?this.options.reverseRelation.key:this.options.collectionKey;if(e[r]&&e[r]!==this.instance){if(t.Relational.showWarnings&&typeof console!=="undefined"){console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,r,this.options.collectionKey)}}else if(r){e[r]=this.instance}}this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset);return e},findRelated:function(e){var i=null;e=n.defaults({parse:this.options.parse},e);if(this.keyContents instanceof t.Collection){this._prepareCollection(this.keyContents);i=this.keyContents}else{var r=[];n.each(this.keyContents,function(t){if(t instanceof this.relatedModel){var i=t}else{i=this.relatedModel.findOrCreate(t,n.extend({merge:true},e,{create:this.options.createModels}))}i&&r.push(i)},this);if(this.related instanceof t.Collection){i=this.related}else{i=this._prepareCollection()}i.set(r,n.defaults({merge:false,parse:false},e))}this.keyIds=n.difference(this.keyIds,n.pluck(i.models,"id"));return i},setKeyContents:function(e){this.keyContents=e instanceof t.Collection?e:null;this.keyIds=[];if(!this.keyContents&&(e||e===0)){this.keyContents=n.isArray(e)?e:[e];n.each(this.keyContents,function(e){var n=t.Relational.store.resolveIdForItem(this.relatedModel,e);if(n||n===0){this.keyIds.push(n)}},this)}},onChange:function(e,i,r){r=r?n.clone(r):{};this.setKeyContents(i);this.changed=false;var s=this.findRelated(r);this.setRelated(s);if(!r.silent){var o=this;t.Relational.eventQueue.add(function(){if(o.changed){o.instance.trigger("change:"+o.key,o.instance,o.related,r,true);o.changed=false}})}},handleAddition:function(e,i,r){r=r?n.clone(r):{};this.changed=true;n.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,r)},this);var s=this;!r.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("add:"+s.key,e,s.related,r)})},handleRemoval:function(e,i,r){r=r?n.clone(r):{};this.changed=true;n.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,r)},this);var s=this;!r.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("remove:"+s.key,e,s.related,r)})},handleReset:function(e,i){var r=this;i=i?n.clone(i):{};!i.silent&&t.Relational.eventQueue.add(function(){r.instance.trigger("reset:"+r.key,r.related,i)})},tryAddRelated:function(e,t,i){var r=n.contains(this.keyIds,e.id);if(r){this.addRelated(e,i);this.keyIds=n.without(this.keyIds,e.id)}},addRelated:function(e,t){var i=this;e.queue(function(){if(i.related&&!i.related.get(e)){i.related.add(e,n.defaults({parse:false},t))}})},removeRelated:function(e,t,n){if(this.related.get(e)){this.related.remove(e,n)}}});t.RelationalModel=t.Model.extend({_class:"Backbone.RelationalModel",relations:null,_relations:null,_isInitialized:false,_deferProcessing:false,_queue:null,_attributeChangeFired:false,subModelTypeAttribute:"type",subModelTypes:null,keydefs:{},compoundKeyDelim:"-",constructor:function(e,i){if(i&&i.collection){var r=this,s=this.collection=i.collection;delete i.collection;this._deferProcessing=true;var o=function(e){if(e===r){r._deferProcessing=false;r.processQueue();s.off("relational:add",o)}};s.on("relational:add",o);n.defer(function(){o(r)})}t.Relational.store.processOrphanRelations();t.Relational.store.listenTo(this,"relational:unregister",t.Relational.store.unregister);this._queue=new t.BlockingQueue;this._queue.block();t.Relational.eventQueue.block();try{t.Model.apply(this,arguments)}finally{t.Relational.eventQueue.unblock()}this.createSavepoint();this.on("sync",this.createSavepoint,this)},createSavepoint:function(){this.savepoint=JSON.parse(JSON.stringify(this));return this},rollback:function(e){e=e||{};this.set(this.savepoint);this.changed=[];if(!e.silent)this.trigger("rollback",this,e)},commit:function(e){e=e||{};var i=this,r=i.isNew(),s=[],o=[];if(r||i.hasChangedDeepSinceSavepoint()){if(!r){n.each(i.relations,function(t){if(t.includeInJSON){s.push(t);t.includeInJSON=false;if(!t.isAutoRelation){var n=i.get(t.key);o.push(n.commit(e))}}})}o.push(i.save(null,e));n.each(s,function(e){e.includeInJSON=true});if(!e.silent)i.trigger("commit",i,e)}return t.$.when.apply(t.$,o)},hasChangedDeepSinceSavepoint:function(){return!n.isEqual(this.toJSON(),this.savepoint)},trigger:function(e){if(e.length>5&&e.indexOf("change")===0){var n=this,i=arguments;t.Relational.eventQueue.add(function(){if(!n._isInitialized){return}var r=true;if(e==="change"){r=n.hasChanged()||n._attributeChangeFired;n._attributeChangeFired=false}else{var s=e.slice(7),o=n.getRelation(s);if(o){r=i[4]===true;if(r){n.changed[s]=i[2]}else if(!o.changed){delete n.changed[s]}}else if(r){n._attributeChangeFired=true}}r&&t.Model.prototype.trigger.apply(n,i)})}else if(e==="destroy"){t.Model.prototype.trigger.apply(this,arguments);t.Relational.store.unregister(this)}else{t.Model.prototype.trigger.apply(this,arguments)}return this},initializeRelations:function(e){this.acquire();this._relations={};n.each(this.relations||[],function(n){t.Relational.store.initializeRelation(this,n,e)},this);this._isInitialized=true;this.release();this.processQueue()},updateRelations:function(e,t){if(this._isInitialized&&!this.isLocked()){n.each(this._relations,function(n){if(!e||(n.keySource in e||n.key in e)){var i=this.attributes[n.keySource]||this.attributes[n.key],r=e&&(e[n.keySource]||e[n.key]);if(n.related!==i||i===null&&r===null){this.trigger("relational:change:"+n.key,this,i,t||{})}}if(n.keySource!==n.key){delete this.attributes[n.keySource]}},this)}},queue:function(e){this._queue.add(e)},processQueue:function(){if(this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()){this._queue.unblock()}},getRelation:function(e){return this._relations[e]},getRelations:function(){return n.values(this._relations)},fetchRelated:function(e,i,r){i=n.extend({update:true,remove:false},i);var s,o,a=[],l=this.getRelation(e),u=l&&(l.keyIds&&l.keyIds.slice(0)||(l.keyId||l.keyId===0?[l.keyId]:[]));if(r){s=l.related instanceof t.Collection?l.related.models:[l.related];n.each(s,function(e){if(e.id||e.id===0){u.push(e.id)}})}if(u&&u.length){var c=[];s=n.map(u,function(e){var t=l.relatedModel.findModel(e);if(!t){var n={};n[l.relatedModel.prototype.idAttribute]=e;t=l.relatedModel.findOrCreate(n,i);c.push(t)}return t},this);if(l.related instanceof t.Collection&&n.isFunction(l.related.url)){o=l.related.url(s)}if(o&&o!==l.related.url()){var f=n.defaults({error:function(){var e=arguments;n.each(c,function(t){t.trigger("destroy",t,t.collection,i);i.error&&i.error.apply(t,e)})},url:o},i);a=[l.related.fetch(f)]}else{a=n.map(s,function(e){var t=n.defaults({error:function(){if(n.contains(c,e)){e.trigger("destroy",e,e.collection,i);i.error&&i.error.apply(e,arguments)}}},i);return e.fetch(t)},this)}}return a},get:function(e){var i=t.Model.prototype.get.call(this,e);if(!this.dotNotation||e.indexOf(".")===-1){return i}var r=e.split(".");var s=n.reduce(r,function(e,i){if(n.isNull(e)||n.isUndefined(e)){return undefined}else if(e instanceof t.Model){return t.Model.prototype.get.call(e,i)}else if(e instanceof t.Collection){return t.Collection.prototype.at.call(e,i)}else{throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+e+", currentSplit: "+i)}},this);if(i!==undefined&&s!==undefined){throw new Error("Ambiguous result for '"+e+"'. direct result: "+i+", dotNotation: "+s)}return i||s},_getNewId:function(e){var t=this,n=null,i="",r=false,s,o=t.keydefs.PRIMARY;if(o){o.forEach(function(n,o){s=e[n]||t.attributes&&t.attributes[n];if(s||s===0){i+=(i?t.compoundKeyDelim:"")+(e[n]||t.attributes&&t.attributes[n])}else{r=true}});if(!r)n=i}if(!n){n=e&&t.idAttribute in e&&e[t.idAttribute]}return n},set:function(e,i,r){t.Relational.eventQueue.block();var s;if(n.isObject(e)||e==null){s=e;r=i}else{s={};s[e]=i}try{var o=this.id,a=this._getNewId(s);t.Relational.store.checkId(this,a);var l=t.Model.prototype.set.apply(this,arguments);if(a){this.id=a}if(!this._isInitialized&&!this.isLocked()){this.constructor.initializeModelHierarchy();if(a||a===0){t.Relational.store.register(this)}this.initializeRelations(r)}else if(a&&a!==o){t.Relational.store.update(this)}if(s){this.updateRelations(s,r)}}finally{t.Relational.eventQueue.unblock()}return l},clone:function(){var e=n.clone(this.attributes);if(!n.isUndefined(e[this.idAttribute])){e[this.idAttribute]=null}n.each(this.getRelations(),function(t){delete e[t.key]});return new this.constructor(e)},toJSON:function(e){if(this.isLocked()){return this.id}this.acquire();var i=t.Model.prototype.toJSON.call(this,e);if(this.constructor._superModel&&!(this.constructor._subModelTypeAttribute in i)){i[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue}n.each(this._relations,function(r){var s=i[r.key],o=r.options.includeInJSON,a=null;if(o===true){if(s&&n.isFunction(s.toJSON)){a=s.toJSON(e)}}else if(n.isString(o)){if(s instanceof t.Collection){a=s.pluck(o)}else if(s instanceof t.Model){a=s.get(o)}if(o===r.relatedModel.prototype.idAttribute){if(r instanceof t.HasMany){a=a.concat(r.keyIds)}else if(r instanceof t.HasOne){a=a||r.keyId;if(!a&&!n.isObject(r.keyContents)){a=r.keyContents||null}}}}else if(n.isArray(o)){if(s instanceof t.Collection){a=[];s.each(function(e){var t={};n.each(o,function(n){t[n]=e.get(n)});a.push(t)})}else if(s instanceof t.Model){a={};n.each(o,function(e){a[e]=s.get(e)})}}else{delete i[r.key]}if(o){i[r.keyDestination]=a}if(r.keyDestination!==r.key){delete i[r.key]}});this.release();return i}},{setup:function(e){this.prototype.relations=(this.prototype.relations||[]).slice(0);this._subModels={};this._superModel=null;if(this.prototype.hasOwnProperty("subModelTypes")){t.Relational.store.addSubModels(this.prototype.subModelTypes,this)}else{this.prototype.subModelTypes=null}n.each(this.prototype.relations||[],function(e){if(!e.model){e.model=this}if(e.reverseRelation&&e.model===this){var i=true;if(n.isString(e.relatedModel)){var r=t.Relational.store.getObjectByName(e.relatedModel);i=r&&r.prototype instanceof t.RelationalModel}if(i){t.Relational.store.initializeRelation(null,e)}else if(n.isString(e.relatedModel)){t.Relational.store.addOrphanRelation(e)}}},this);return this},build:function(e,t){this.initializeModelHierarchy();var n=this._findSubModelType(this,e)||this;return new n(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var n=t[e.prototype.subModelTypeAttribute];var i=e._subModels[n];if(i){return i}else{for(n in e._subModels){i=this._findSubModelType(e._subModels[n],t);if(i){return i}}}}return null},initializeModelHierarchy:function(){this.inheritRelations();if(this.prototype.subModelTypes){var e=n.keys(this._subModels);var i=n.omit(this.prototype.subModelTypes,e);n.each(i,function(e){var n=t.Relational.store.getObjectByName(e);n&&n.initializeModelHierarchy()})}},inheritRelations:function(){if(!n.isUndefined(this._superModel)&&!n.isNull(this._superModel)){return}t.Relational.store.setupSuperModel(this);if(this._superModel){this._superModel.inheritRelations();if(this._superModel.prototype.relations){var e=n.filter(this._superModel.prototype.relations||[],function(e){return!n.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else{this._superModel=false}},findOrCreate:function(e,t){t||(t={});var i=n.isObject(e)&&t.parse&&this.prototype.parse?this.prototype.parse(n.clone(e)):e;var r=this.findModel(i);if(n.isObject(e)){if(r&&t.merge!==false){delete t.collection;delete t.url;r.set(i,t)}else if(!r&&t.create!==false){r=this.build(e,t)}}return r},find:function(e,t){t||(t={});t.create=false;return this.findOrCreate(e,t)},findModel:function(e){return t.Relational.store.find(this,e)}});n.extend(t.RelationalModel.prototype,t.Semaphore);var i=t.Collection.prototype.__initialize=t.Collection.prototype.initialize;t.Collection.prototype.initialize=function(e,t){i.apply(this,arguments);this.createSavepoint();this.on("sync",this.createSavepoint,this)};t.Collection.prototype.createSavepoint=function(){this._added=[];this._removed=[];return this;n.each(this.models,function(e){e.createSavepoint()})};t.Collection.prototype.rollback=function(e){e=e||{};this.add(this._removed,{silent:true});n.each(this.models,function(e){e.rollback()});this.remove(this._added,{silent:true});this.createSavepoint();if(!e.silent)this.trigger("rollback",this,e);return this};t.Collection.prototype.hasChangedDeepSinceSavepoint=function(){if(this._removed.length||this._added.length){return true}return!!n.find(this.models,function(e){return e.hasChangedDeepSinceSavepoint()})};t.Collection.prototype.commit=function(e){var i=[];if(this.hasChangedDeepSinceSavepoint()){e=e||{};n.each(this._removed,function(e){i.push(e.destroy())});n.each(this.models,function(e){i.push(e.commit())});this.createSavepoint();if(!e.silent)this.trigger("commit",this,e)}return t.$.when.apply(t.$,i)};t.Collection.prototype._class="Backbone.Collection";t.Collection.prototype.__prepareModel=t.Collection.prototype._prepareModel;t.Collection.prototype._prepareModel=function(e,i){var r;if(e instanceof t.Model){if(!e.collection){e.collection=this}r=e}else{i=i?n.clone(i):{};i.collection=this;if(typeof this.model.findOrCreate!=="undefined"){r=this.model.findOrCreate(e,i)}else{r=new this.model(e,i)}if(r&&r.validationError){this.trigger("invalid",this,e,i);r=false}}return r};var r=t.Collection.prototype.__set=t.Collection.prototype.set;t.Collection.prototype.set=function(e,i){if(!(this.model.prototype instanceof t.RelationalModel)){return r.apply(this,arguments)}if(i&&i.parse){e=this.parse(e,i)}var s=!n.isArray(e),o=[],a=[];e=s?e?[e]:[]:n.clone(e);n.each(e,function(e){if(!(e instanceof t.Model)){e=t.Collection.prototype._prepareModel.call(this,e,i)}if(e){a.push(e);if(!(this.get(e)||this.get(e.cid))){o.push(e)}else if(e.id!=null){this._byId[e.id]=e}}},this);a=s?a.length?a[0]:null:a;var l=r.call(this,a,n.defaults({parse:false},i));n.each(o,function(e){if(this.get(e)||this.get(e.cid)){this.trigger("relational:add",e,this,i)}},this);return l};var s=t.Collection.prototype.__get=t.Collection.prototype.get;t.Collection.prototype.get=function(e){if(!(this.model.prototype instanceof t.RelationalModel)){return s.apply(this,arguments)}if(e==null)return void 0;var n=t.Relational.store.resolveIdForItem(this.model,e);return this._byId[n!=null?n:e.cid||e]};var o=t.Collection.prototype.__add=t.Collection.prototype.add;t.Collection.prototype.add=function(e,i){if(!(this.model.prototype instanceof t.RelationalModel)){return o.apply(this,arguments)}var r=o.call(this,e,n.defaults(i||{},{add:true,merge:false,remove:false}));this._added=this._added.concat(r);return r};var a=t.Collection.prototype.__remove=t.Collection.prototype.remove;t.Collection.prototype.remove=function(e,i){if(!(this.model.prototype instanceof t.RelationalModel)){this._removed=this._removed.concat(e);return a.apply(this,arguments)}var r=!n.isArray(e),s=[];e=r?e?[e]:[]:n.clone(e);i||(i={});n.each(e,function(e){e=this.get(e)||e&&this.get(e.cid);e&&s.push(e)},this);var o=a.call(this,r?s.length?s[0]:null:s,i);n.each(s,function(e){this.trigger("relational:remove",e,this,i)},this);this._removed=this._removed.concat(s);return o};var l=t.Collection.prototype.__reset=t.Collection.prototype.reset;t.Collection.prototype.reset=function(e,i){i=n.extend({merge:true},i);var r=l.call(this,e,i);this._added=[];this._removed=[];if(this.model.prototype instanceof t.RelationalModel){this.trigger("relational:reset",this,i)}this.createSavepoint();return r};var u=t.Collection.prototype.__sort=t.Collection.prototype.sort;t.Collection.prototype.sort=function(e){var n=u.call(this,e);if(this.model.prototype instanceof t.RelationalModel){this.trigger("relational:reset",this,e)}return n};var c=t.Collection.prototype.__trigger=t.Collection.prototype.trigger;t.Collection.prototype.trigger=function(e){if(!(this.model.prototype instanceof t.RelationalModel)){return c.apply(this,arguments)}if(e==="add"||e==="remove"||e==="reset"||e==="sort"){var i=this,r=arguments;if(n.isObject(r[3])){r=n.toArray(r);r[3]=n.clone(r[3])}t.Relational.eventQueue.add(function(){c.apply(i,r)})}else{c.apply(this,arguments)}return this};t.RelationalModel.extend=function(e,n){var i=t.Model.extend.apply(this,arguments);i.setup(this);return i}})},function(e,t,n){(function(t){if(true){e.exports=t(n(2),n(1))}else if(typeof define==="function"&&define.amd){define(["backbone","underscore"],t)}})(function(e,t){e.Validation=function(t){"use strict";var n={forceUpdate:false,
selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype};var i={formatLabel:function(e,t){return u[n.labelFormatter](e,t)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,n){return typeof e[n]!=="undefined"?e[n]:t})}};var r=function(n,i,s){i=i||{};s=s||"";t.each(n,function(t,o){if(n.hasOwnProperty(o)){if(t&&typeof t==="object"&&!(t instanceof Array||t instanceof Date||t instanceof RegExp||t instanceof e.Model||t instanceof e.Collection)){r(t,i,s+o+".")}else{i[s+o]=t}}});return i};var s=function(){var e=function(e){return t.reduce(t.keys(t.result(e,"validation")||{}),function(e,t){e[t]=void 0;return e},{})};var s=function(e,n){var i=e.validation?t.result(e,"validation")[n]||{}:{};if(t.isFunction(i)||t.isString(i)){i={fn:i}}if(!t.isArray(i)){i=[i]}return t.reduce(i,function(e,n){t.each(t.without(t.keys(n),"msg"),function(t){e.push({fn:c[t],val:n[t],msg:n.msg})});return e},[])};var a=function(e,n,r,o){return t.reduce(s(e,n),function(s,a){var l=t.extend({},i,c),u=a.fn.call(l,r,n,a.val,e,o);if(u===false||s===false){return false}if(u&&!s){return t.result(a,"msg")||u}return s},"")};var l=function(e,n){var i,s={},o=true,l=t.clone(n),u=r(n);t.each(u,function(t,n){i=a(e,n,t,l);if(i){s[n]=i;o=false}});return{invalidAttrs:s,isValid:o}};var u=function(n,i){return{preValidate:function(e,n){var i=this,r={},s;if(t.isObject(e)){t.each(e,function(e,t){s=i.preValidate(t,e);if(s){r[t]=s}});return t.isEmpty(r)?undefined:r}else{return a(this,e,n,t.extend({},this.attributes))}},isValid:function(e){var n=r(this.attributes);if(t.isString(e)){return!a(this,e,n[e],t.extend({},this.attributes))}if(t.isArray(e)){return t.reduce(e,function(e,i){return e&&!a(this,i,n[i],t.extend({},this.attributes))},true,this)}if(e===true){this.validate()}return this.validation?this._isValid:true},validate:function(s,o){var a=this,u=!s,c=t.extend({},i,o),f=e(a),h=t.extend({},f,a.attributes,s),d=r(s||h),p=l(a,h);a._isValid=p.isValid;t.each(f,function(e,t){var i=p.invalidAttrs.hasOwnProperty(t);if(!i){c.valid(n,t,c.selector)}});t.each(f,function(e,t){var i=p.invalidAttrs.hasOwnProperty(t),r=d.hasOwnProperty(t);if(i&&(r||u)){c.invalid(n,t,p.invalidAttrs[t],c.selector)}});t.defer(function(){a.trigger("validated",a._isValid,a,p.invalidAttrs);a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,p.invalidAttrs)});if(!c.forceUpdate&&t.intersection(t.keys(p.invalidAttrs),t.keys(d)).length>0){return p.invalidAttrs}}}};var f=function(e,n,i){t.extend(n,u(e,i))};var h=function(e){delete e.validate;delete e.preValidate;delete e.isValid};var d=function(e){f(this.view,e,this.options)};var p=function(e){h(e)};return{version:"0.9.1",configure:function(e){t.extend(n,e)},bind:function(e,i){i=t.extend({},n,o,i);var r=i.model||e.model,s=i.collection||e.collection;if(typeof r==="undefined"&&typeof s==="undefined"){throw"Before you execute the binding your view must have a model or a collection.\n"+"See http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information."}if(r){f(e,r,i)}else if(s){s.each(function(t){f(e,t,i)});s.bind("add",d,{view:e,options:i});s.bind("remove",p)}},unbind:function(e,n){n=t.extend({},n);var i=n.model||e.model,r=n.collection||e.collection;if(i){h(i)}else if(r){r.each(function(e){h(e)});r.unbind("add",d);r.unbind("remove",p)}},mixin:u(null,n)}}();var o=s.callbacks={valid:function(e,t,n){e.$("["+n+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,n,i){e.$("["+i+'~="'+t+'"]').addClass("invalid").attr("data-error",n)}};var a=s.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,domain:/^(?:[a-zA-Z0-9]+(?:\-*[a-zA-Z0-9])*\.)+[a-zA-Z]{2,6}$/};var l=s.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",int:"{0} must be a whole number",email:"{0} must be a valid email",url:"{0} must be a valid url",domain:"{0} must be a valid domain",inlinePattern:"{0} is invalid"};var u=s.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return t===0?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||u.sentenceCase(e,t)}};var c=s.validators=function(){var e=String.prototype.trim?function(e){return e===null?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,n=/\s+$/;return e===null?"":e.toString().replace(t,"").replace(n,"")};var n=function(e){return t.isNumber(e)||t.isString(e)&&e.match(a.number)};var i=function(n){return!(t.isNull(n)||t.isUndefined(n)||t.isString(n)&&e(n)===""||t.isArray(n)&&t.isEmpty(n))};return{fn:function(e,n,i,r,s){if(t.isString(i)){i=r[i]}return i.call(r,e,n,s)},required:function(e,n,r,s,o){var a=t.isFunction(r)?r.call(s,e,n,o):r;if(!a&&!i(e)){return false}if(a&&!i(e)){return this.format(l.required,this.formatLabel(n,s))}},acceptance:function(e,n,i,r){if(e!=="true"&&(!t.isBoolean(e)||e===false)){return this.format(l.acceptance,this.formatLabel(n,r))}},min:function(e,t,i,r){if(!n(e)||e<i){return this.format(l.min,this.formatLabel(t,r),i)}},max:function(e,t,i,r){if(!n(e)||e>i){return this.format(l.max,this.formatLabel(t,r),i)}},range:function(e,t,i,r){if(!n(e)||e<i[0]||e>i[1]){return this.format(l.range,this.formatLabel(t,r),i[0],i[1])}},length:function(e,n,i,r){if(!t.isString(e)||e.length!==i){return this.format(l.length,this.formatLabel(n,r),i)}},minLength:function(e,n,i,r){if(!t.isString(e)||e.length<i){return this.format(l.minLength,this.formatLabel(n,r),i)}},maxLength:function(e,n,i,r){if(!t.isString(e)||e.length>i){return this.format(l.maxLength,this.formatLabel(n,r),i)}},rangeLength:function(e,n,i,r){if(!t.isString(e)||e.length<i[0]||e.length>i[1]){return this.format(l.rangeLength,this.formatLabel(n,r),i[0],i[1])}},oneOf:function(e,n,i,r){if(!t.include(i,e)){return this.format(l.oneOf,this.formatLabel(n,r),i.join(", "))}},equalTo:function(e,t,n,i,r){if(e!==r[n]){return this.format(l.equalTo,this.formatLabel(t,i),this.formatLabel(n,i))}},pattern:function(e,t,n,r){if(!i(e)||!e.toString().match(a[n]||n)){return this.format(l[n]||l.inlinePattern,this.formatLabel(t,r),n)}},url:function(e,t,n,i){if(!a.url.test(e)){return this.format(l.url,this.formatLabel(t,i))}},domain:function(e,t,n,i){if(!a.domain.test(e)){return this.format(l.domain,this.formatLabel(t,i))}},email:function(e,t,n,i){if(!a.email.test(e)){return this.format(l.email,this.formatLabel(t,i))}},number:function(e,t,n,i){if(isNaN(parseFloat(e))||!isFinite(e)){return this.format(l.number,this.formatLabel(t,i))}},int:function(e,t,n,i){if(e%1!==0){return this.format(l.int,this.formatLabel(t,i))}}}}();t.each(c,function(e,n){c[n]=t.bind(c[n],t.extend({},i,c))});return s}(t);return e.Validation})},function(e,t,n){(function(t,i){if(true){var r=n(1);var s=n(2);e.exports=i(r,s)}else if(typeof define==="function"&&define.amd){define(["underscore","backbone"],i)}})(this,function(e,t){"use strict";t.Wreqr=function(e,t,n){"use strict";var i={};i.Handlers=function(e,t){"use strict";var n=function(e){this.options=e;this._wreqrHandlers={};if(t.isFunction(this.initialize)){this.initialize(e)}};n.extend=e.Model.extend;t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;if(t.isObject(e)&&!t.isFunction(e)){i=e.context;e=e.callback}this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i;this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t){throw new Error("Handler not found for '"+e+"'")}return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}});return n}(e,n);i.CommandStorage=function(){"use strict";var t=function(e){this.options=e;this._commands={};if(n.isFunction(this.initialize)){this.initialize(e)}};n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];if(!t){t={command:e,instances:[]};this._commands[e]=t}return t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}});return t}();i.Commands=function(e){"use strict";return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0];t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e)){this.getHandler(e).apply(this,t)}else{this.storage.addCommand(e,t)}},_executeCommands:function(e,t,i){var r=this.storage.getCommands(e);n.each(r.instances,function(e){t.apply(i,e)});this.storage.clearCommands(e)},_initializeStorage:function(e){var t;var i=e.storageType||this.storageType;if(n.isFunction(i)){t=new i}else{t=i}this.storage=t}})}(i);i.RequestResponse=function(e){"use strict";return e.Handlers.extend({request:function(){var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(i);i.EventAggregator=function(e,t){"use strict";var n=function(){};n.extend=e.Model.extend;t.extend(n.prototype,e.Events);return n}(e,n);return i}(t,t.Marionette,e);return t.Wreqr})},function(e,t,n){window.jsonrpc={};jsonrpc.CallStack=function(e,t,n,i){this._counter=0;this._enterFn=e;this._exitFn=n;this._enterScope=t;this._exitScope=i};jsonrpc.CallStack.prototype={enter:function(){this._counter=this._counter<0?1:this._counter+1;if(this._counter===1){this._enterFn.apply(this._enterScope,arguments)}},exit:function(e){this._counter-=1;if(this._counter===0){this._exitFn.apply(this._exitScope,arguments)}}};jsonrpc.DelayedTask=function(e,t,n){this._fn=e||function(){};this._scope=t||undefined;this._args=n||[];this._id=null};jsonrpc.Observable=function(){this._listeners=[]};jsonrpc.Observable.prototype={bind:function(e,t){var n={fn:e,scope:t||this};this._listeners.push(n);return n},unbind:function(e){var t=this._listeners.indexOf(e);if(t!==-1){this._listeners.splice(t,1)}},trigger:function(){var e;for(e=0;e<this._listeners.length;e+=1){this._listeners[e].fn.apply(this._listeners[e].scope,arguments)}}};jsonrpc.DelayedTask.prototype={delay:function(e,t,n,i){var r=this;this._fn=t||this._fn;this._scope=n||this._scope;this._args=i||this._args;this.cancel();this._id=window.setInterval(function(){window.clearInterval(r._id);r._id=null;r._fn.apply(r._scope,r._args)},e)},cancel:function(){if(this._id){window.clearInterval(this._id);this._id=null}}};jsonrpc.JsonRpc=function(e){var t=e.split("/");this._url=e;this._end=t[t.length-2];this.loading=new jsonrpc.Observable;this.loaded=new jsonrpc.Observable;this.unhandledFailure=new jsonrpc.Observable;this._loadingState=new jsonrpc.CallStack(this.loading.trigger,this.loading,this.loaded.trigger,this.loaded);this._requests=[];this._batchingMilliseconds=10;this._delayedTask=new jsonrpc.DelayedTask};jsonrpc.JsonRpc.prototype={setBatchingMilliseconds:function(e){this._batchingMilliseconds=e},call:function(){var e=this._getParams.apply(this,arguments);this._loadingState.enter();if(e.standalone){this._sendRequests([e])}else{this._requests.push(e);if(this._batchingMilliseconds){this._delayedTask.delay(this._batchingMilliseconds,this._sendRequests,this)}else{this._sendRequests()}}},_sendRequests:function(e){var t=this,n=[],i=[],r,s=[],o=[],a=true,l;if(typeof e==="undefined"){e=t._requests;t._requests=[]}for(r=0;r<e.length;r+=1){e[r].request.id=r;if(e[r].secure){o.push(e[r].request.method);i.push(e[r].request)}else{s.push(e[r].request.method);n.push(e[r].request)}}if(n.length>0){if(n.length===1){n=n[0]}l=t._url+(a?"?"+this._end+"["+s.join()+"]":"");t._doJsonPost(l,n,u)}if(i.length>0){if(i.length===1){i=i[0]}l=t._url+(a?"?"+this._end+"["+o.join()+"]":"");t._doJsonpGet(l,i,u)}function u(n,i,s){var o;if(n){o=t._isArray(i)?i:[i]}else{o=[];for(r=0;r<e.length;r+=1){o[r]={id:r,error:{message:i}}}}t._handleResponses(e,o,s)}},_handleResponses:function(e,t,n){var i,r,s;for(i=0;i<t.length;i+=1){r=t[i];s=e[r.id];this._handleResponse(s,r,n)}},_handleResponse:function(e,t,n){var i=!t.error,r=i?t.result:t.error.message;this._loadingState.exit();if(i){e.success.call(e.scope,r,n)}else{e.failure.call(e.scope,r,n)}e.callback.call(e.scope,i,r,n)},_getParams:function(){var e=this,t=Array.prototype.slice.call(arguments),n={request:{jsonrpc:"2.0",method:t.shift()}};n.request.params=[];while(t.length>1&&!this._isFunction(t[0])){n.request.params.push(t.shift())}if(this._isFunction(t[0])){n.success=t[0];n.scope=t[1]}else{n.success=t[0].success;n.failure=t[0].failure;n.callback=t[0].callback;n.scope=t[0].scope;n.secure=!!t[0].secure;n.standalone=!!t[0].standalone}n.success=n.success||function(){return};n.failure=n.failure||function(){e.unhandledFailure.trigger.apply(e.unhandledFailure,arguments)};n.callback=n.callback||function(){return};return n},_isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},_isFunction:function(e){return Object.prototype.toString.apply(e)==="[object Function]"},_beforeSend:function(e){},_doJsonPost:function(e,t,i){var r=Weebly.jQuery||n(3),s=r.ajax({type:"POST",url:e,cache:false,contentType:"application/json; charset=UTF-8",dataType:"json",beforeSend:this._beforeSend,data:JSON.stringify(t),headers:{"x-wtok":Weebly.RequestToken}}).done(function(e){var t=s.getResponseHeader("Content-Type");if(s.status!==200){i(false,'Expected HTTP response "200 OK", found "'+s.status+" "+s.statusText+'"',s)}else if(t.indexOf("application/json")!==0){i(false,'Expected JSON encoded response, found "'+t+'"',s)}else{i(true,e,s)}}).fail(function(){i(false,"HTTP request failed",s)})},_doJsonpGet:function(e,t,i){e="https://"+_W.securePrefix+e;var r=Weebly.jQuery||n(3),s=r.ajax({type:"GET",url:e,cache:false,jsonpCallback:"WJsonp",dataType:"jsonp",beforeSend:this._beforeSend,data:t,headers:{"x-wtok":Weebly.RequestToken}}).done(function(e){i(true,e,s)}).fail(function(){i(false,"HTTP request failed",s)})}}},function(e,t){(function(t){var n,i="2.8.1",r=typeof global!=="undefined"?global:this,s,o=Math.round,a,l=0,u=1,c=2,f=3,h=4,d=5,p=6,v={},g=[],m=typeof e!=="undefined"&&e.exports,y=/^\/?Date\((\-?\d+)/i,_=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,b=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,w=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,k=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,C=/\d\d?/,x=/\d{1,3}/,M=/\d{1,4}/,E=/[+\-]?\d{1,6}/,S=/\d+/,R=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,F=/Z|[\+\-]\d\d:?\d\d/gi,T=/T/i,D=/[\+\-]?\d+(\.\d{1,3})?/,O=/\d{1,2}/,A=/\d/,I=/\d\d/,P=/\d{3}/,j=/\d{4}/,z=/[+-]?\d{6}/,N=/[+-]?\d+/,q=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Y="YYYY-MM-DDTHH:mm:ssZ",U=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],H=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],L=/([\+\-]|\d\d)/gi,B="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),W={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},V={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},G={},J={s:45,m:45,h:22,d:26,M:11},K="DDD w W M D d".split(" "),Q="M D H h m s w W".split(" "),Z={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return pe(this.year()%100,2)},YYYY:function(){return pe(this.year(),4)},YYYYY:function(){return pe(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+pe(Math.abs(e),6)},gg:function(){return pe(this.weekYear()%100,2)},gggg:function(){return pe(this.weekYear(),4)},ggggg:function(){return pe(this.weekYear(),5)},GG:function(){return pe(this.isoWeekYear()%100,2)},GGGG:function(){return pe(this.isoWeekYear(),4)},GGGGG:function(){return pe(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Me(this.milliseconds()/100)},SS:function(){return pe(Me(this.milliseconds()/10),2)},SSS:function(){return pe(this.milliseconds(),3)},SSSS:function(){return pe(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";if(e<0){e=-e;t="-"}return t+pe(Me(e/60),2)+":"+pe(Me(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";if(e<0){e=-e;t="-"}return t+pe(Me(e/60),2)+pe(Me(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},X={},ee=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function te(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function ne(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function ie(e){if(n.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function re(e,t){var n=true;return fe(function(){if(n){ie(e);n=false}return t.apply(this,arguments)},t)}function se(e,t){if(!X[e]){ie(t);X[e]=true}}function oe(e,t){return function(n){return pe(e.call(this,n),t)}}function ae(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}while(K.length){a=K.pop();Z[a+"o"]=ae(Z[a],a)}while(Q.length){a=Q.pop();Z[a+a]=oe(Z[a],2)}Z.DDDD=oe(Z.DDD,3);function le(){}function ue(e,t){if(t!==false){Te(e)}he(this,e);this._d=new Date(+e._d)}function ce(e){var t=Ce(e),i=t.year||0,r=t.quarter||0,s=t.month||0,o=t.week||0,a=t.day||0,l=t.hour||0,u=t.minute||0,c=t.second||0,f=t.millisecond||0;this._milliseconds=+f+c*1e3+u*6e4+l*36e5;this._days=+a+o*7;this._months=+s+r*3+i*12;this._data={};this._locale=n.localeData();this._bubble()}function fe(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}if(t.hasOwnProperty("toString")){e.toString=t.toString}if(t.hasOwnProperty("valueOf")){e.valueOf=t.valueOf}return e}function he(e,t){var n,i,r;if(typeof t._isAMomentObject!=="undefined"){e._isAMomentObject=t._isAMomentObject}if(typeof t._i!=="undefined"){e._i=t._i}if(typeof t._f!=="undefined"){e._f=t._f}if(typeof t._l!=="undefined"){e._l=t._l}if(typeof t._strict!=="undefined"){e._strict=t._strict}if(typeof t._tzm!=="undefined"){e._tzm=t._tzm}if(typeof t._isUTC!=="undefined"){e._isUTC=t._isUTC}if(typeof t._offset!=="undefined"){e._offset=t._offset}if(typeof t._pf!=="undefined"){e._pf=t._pf}if(typeof t._locale!=="undefined"){e._locale=t._locale}if(g.length>0){for(n in g){i=g[n];r=t[i];if(typeof r!=="undefined"){e[i]=r}}}return e}function de(e){if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}function pe(e,t,n){var i=""+Math.abs(e),r=e>=0;while(i.length<t){i="0"+i}return(r?n?"+":"":"-")+i}function ve(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function ge(e,t){var n;t=Pe(t,e);if(e.isBefore(t)){n=ve(e,t)}else{n=ve(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function me(e,t){return function(i,r){var s,o;if(r!==null&&!isNaN(+r)){se(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period).");o=i;i=r;r=o}i=typeof i==="string"?+i:i;s=n.duration(i,r);ye(this,s,e);return this}}function ye(e,t,i,r){var s=t._milliseconds,o=t._days,a=t._months;r=r==null?true:r;if(s){e._d.setTime(+e._d+s*i)}if(o){ft(e,"Date",ct(e,"Date")+o*i)}if(a){ut(e,ct(e,"Month")+a*i)}if(r){n.updateOffset(e,o||a)}}function _e(e){return Object.prototype.toString.call(e)==="[object Array]"}function be(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function we(e,t,n){var i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0,o;for(o=0;o<i;o++){if(n&&e[o]!==t[o]||!n&&Me(e[o])!==Me(t[o])){s++}}return s+r}function ke(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=V[e]||$[t]||t}return e}function Ce(e){var t={},n,i;for(i in e){if(e.hasOwnProperty(i)){n=ke(i);if(n){t[n]=e[i]}}}return t}function xe(e){var i,r;if(e.indexOf("week")===0){i=7;r="day"}else if(e.indexOf("month")===0){i=12;r="month"}else{return}n[e]=function(s,o){var a,l,u=n._locale[e],c=[];if(typeof s==="number"){o=s;s=t}l=function(e){var t=n().utc().set(r,e);return u.call(n._locale,t,s||"")};if(o!=null){return l(o)}else{for(a=0;a<i;a++){c.push(l(a))}return c}}}function Me(e){var t=+e,n=0;if(t!==0&&isFinite(t)){if(t>=0){n=Math.floor(t)}else{n=Math.ceil(t)}}return n}function Ee(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function Se(e,t,i){return st(n([e,11,31+t-i]),t,i).week}function Re(e){return Fe(e)?366:365}function Fe(e){return e%4===0&&e%100!==0||e%400===0}function Te(e){var t;if(e._a&&e._pf.overflow===-2){t=e._a[u]<0||e._a[u]>11?u:e._a[c]<1||e._a[c]>Ee(e._a[l],e._a[u])?c:e._a[f]<0||e._a[f]>23?f:e._a[h]<0||e._a[h]>59?h:e._a[d]<0||e._a[d]>59?d:e._a[p]<0||e._a[p]>999?p:-1;if(e._pf._overflowDayOfYear&&(t<l||t>c)){t=c}e._pf.overflow=t}}function De(e){if(e._isValid==null){e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated;if(e._strict){e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0}}return e._isValid}function Oe(e){return e?e.toLowerCase().replace("_","-"):e}function Ae(e){var t=0,n,i,r,s;while(t<e.length){s=Oe(e[t]).split("-");n=s.length;i=Oe(e[t+1]);i=i?i.split("-"):null;while(n>0){r=Ie(s.slice(0,n).join("-"));if(r){return r}if(i&&i.length>=n&&we(s,i,true)>=n-1){break}n--}t++}return null}function Ie(e){var t=null;if(!v[e]&&m){try{t=n.locale();require("./locale/"+e);n.locale(t)}catch(e){}}return v[e]}function Pe(e,t){return t._isUTC?n(e).zone(t._offset||0):n(e).local()}fe(le.prototype,{set:function(e){var t,n;for(n in e){t=e[n];if(typeof t==="function"){this[n]=t}else{this["_"+n]=t}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,r;if(!this._monthsParse){this._monthsParse=[]}for(t=0;t<12;t++){if(!this._monthsParse[t]){i=n.utc([2e3,t]);r="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[t]=new RegExp(r.replace(".",""),"i")}if(this._monthsParse[t].test(e)){return t}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,r;if(!this._weekdaysParse){this._weekdaysParse=[]}for(t=0;t<7;t++){if(!this._weekdaysParse[t]){i=n([2e3,1]).day(t);r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")}if(this._weekdaysParse[t].test(e)){return t}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];if(!t&&this._longDateFormat[e.toUpperCase()]){t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});this._longDateFormat[e]=t}return t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n==="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return typeof r==="function"?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n==="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return st(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function je(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function ze(e){var t=e.match(w),n,i;for(n=0,i=t.length;n<i;n++){if(Z[t[n]]){t[n]=Z[t[n]]}else{t[n]=je(t[n])}}return function(r){var s="";for(n=0;n<i;n++){s+=t[n]instanceof Function?t[n].call(r,e):t[n]}return s}}function Ne(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=qe(t,e.localeData());if(!G[t]){G[t]=ze(t)}return G[t](e)}function qe(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}k.lastIndex=0;while(n>=0&&k.test(e)){e=e.replace(k,i);k.lastIndex=0;n-=1}return e}function Ye(e,t){var n,i=t._strict;switch(e){case"Q":return A;case"DDDD":return P;case"YYYY":case"GGGG":case"gggg":return i?j:M;case"Y":case"G":case"g":return N;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?z:E;case"S":if(i){return A}case"SS":if(i){return I}case"SSS":if(i){return P}case"DDD":return x;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return R;case"a":case"A":return t._locale._meridiemParse;case"X":return D;case"Z":case"ZZ":return F;case"T":return T;case"SSSS":return S;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?I:C;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return C;case"Do":return O;default:n=new RegExp(Je(Ge(e.replace("\\","")),"i"));return n}}function Ue(e){e=e||"";var t=e.match(F)||[],n=t[t.length-1]||[],i=(n+"").match(L)||["-",0,0],r=+(i[1]*60)+Me(i[2]);return i[0]==="+"?-r:r}function He(e,t,i){var r,s=i._a;switch(e){case"Q":if(t!=null){s[u]=(Me(t)-1)*3}break;case"M":case"MM":if(t!=null){s[u]=Me(t)-1}break;case"MMM":case"MMMM":r=i._locale.monthsParse(t);if(r!=null){s[u]=r}else{i._pf.invalidMonth=t}break;case"D":case"DD":if(t!=null){s[c]=Me(t)}break;case"Do":if(t!=null){s[c]=Me(parseInt(t,10))}break;case"DDD":case"DDDD":if(t!=null){i._dayOfYear=Me(t)}break;case"YY":s[l]=n.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[l]=Me(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":s[f]=Me(t);break;case"m":case"mm":s[h]=Me(t);break;case"s":case"ss":s[d]=Me(t);break;case"S":case"SS":case"SSS":case"SSSS":s[p]=Me(("0."+t)*1e3);break;case"X":i._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":i._useUTC=true;i._tzm=Ue(t);break;case"dd":case"ddd":case"dddd":r=i._locale.weekdaysParse(t);if(r!=null){i._w=i._w||{};i._w["d"]=r}else{i._pf.invalidWeekday=t}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2);if(t){i._w=i._w||{};i._w[e]=Me(t)}break;case"gg":case"GG":i._w=i._w||{};i._w[e]=n.parseTwoDigitYear(t)}}function Le(e){var t,i,r,s,o,a,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){o=1;a=4;i=te(t.GG,e._a[l],st(n(),1,4).year);r=te(t.W,1);s=te(t.E,1)}else{o=e._locale._week.dow;a=e._locale._week.doy;i=te(t.gg,e._a[l],st(n(),o,a).year);r=te(t.w,1);if(t.d!=null){s=t.d;if(s<o){++r}}else if(t.e!=null){s=t.e+o}else{s=o}}u=ot(i,r,s,a,o);e._a[l]=u.year;e._dayOfYear=u.dayOfYear}function Be(e){var t,n,i=[],r,s;if(e._d){return}r=Ve(e);if(e._w&&e._a[c]==null&&e._a[u]==null){Le(e)}if(e._dayOfYear){s=te(e._a[l],r[l]);if(e._dayOfYear>Re(s)){e._pf._overflowDayOfYear=true}n=tt(s,0,e._dayOfYear);e._a[u]=n.getUTCMonth();e._a[c]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=i[t]=r[t]}for(;t<7;t++){e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t]}e._d=(e._useUTC?tt:et).apply(null,i);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function We(e){var t;if(e._d){return}t=Ce(e._i);e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond];Be(e)}function Ve(e){var t=new Date;if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}else{return[t.getFullYear(),t.getMonth(),t.getDate()]}}
function $e(e){if(e._f===n.ISO_8601){Qe(e);return}e._a=[];e._pf.empty=true;var t=""+e._i,i,r,s,o,a,l=t.length,u=0;s=qe(e._f,e._locale).match(w)||[];for(i=0;i<s.length;i++){o=s[i];r=(t.match(Ye(o,e))||[])[0];if(r){a=t.substr(0,t.indexOf(r));if(a.length>0){e._pf.unusedInput.push(a)}t=t.slice(t.indexOf(r)+r.length);u+=r.length}if(Z[o]){if(r){e._pf.empty=false}else{e._pf.unusedTokens.push(o)}He(o,r,e)}else if(e._strict&&!r){e._pf.unusedTokens.push(o)}}e._pf.charsLeftOver=l-u;if(t.length>0){e._pf.unusedInput.push(t)}if(e._isPm&&e._a[f]<12){e._a[f]+=12}if(e._isPm===false&&e._a[f]===12){e._a[f]=0}Be(e);Te(e)}function Ge(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function Je(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ke(e){var t,n,i,r,s;if(e._f.length===0){e._pf.invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<e._f.length;r++){s=0;t=he({},e);t._pf=ne();t._f=e._f[r];$e(t);if(!De(t)){continue}s+=t._pf.charsLeftOver;s+=t._pf.unusedTokens.length*10;t._pf.score=s;if(i==null||s<i){i=s;n=t}}fe(e,n||t)}function Qe(e){var t,n,i=e._i,r=q.exec(i);if(r){e._pf.iso=true;for(t=0,n=U.length;t<n;t++){if(U[t][1].exec(i)){e._f=U[t][0]+(r[6]||" ");break}}for(t=0,n=H.length;t<n;t++){if(H[t][1].exec(i)){e._f+=H[t][0];break}}if(i.match(F)){e._f+="Z"}$e(e)}else{e._isValid=false}}function Ze(e){Qe(e);if(e._isValid===false){delete e._isValid;n.createFromInputFallback(e)}}function Xe(e){var i=e._i,r;if(i===t){e._d=new Date}else if(be(i)){e._d=new Date(+i)}else if((r=y.exec(i))!==null){e._d=new Date(+r[1])}else if(typeof i==="string"){Ze(e)}else if(_e(i)){e._a=i.slice(0);Be(e)}else if(typeof i==="object"){We(e)}else if(typeof i==="number"){e._d=new Date(i)}else{n.createFromInputFallback(e)}}function et(e,t,n,i,r,s,o){var a=new Date(e,t,n,i,r,s,o);if(e<1970){a.setFullYear(e)}return a}function tt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<1970){t.setUTCFullYear(e)}return t}function nt(e,t){if(typeof e==="string"){if(!isNaN(e)){e=parseInt(e,10)}else{e=t.weekdaysParse(e);if(typeof e!=="number"){return null}}}return e}function it(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function rt(e,t,i){var r=n.duration(e).abs(),s=o(r.as("s")),a=o(r.as("m")),l=o(r.as("h")),u=o(r.as("d")),c=o(r.as("M")),f=o(r.as("y")),h=s<J.s&&["s",s]||a===1&&["m"]||a<J.m&&["mm",a]||l===1&&["h"]||l<J.h&&["hh",l]||u===1&&["d"]||u<J.d&&["dd",u]||c===1&&["M"]||c<J.M&&["MM",c]||f===1&&["y"]||["yy",f];h[2]=t;h[3]=+e>0;h[4]=i;return it.apply({},h)}function st(e,t,i){var r=i-t,s=i-e.day(),o;if(s>r){s-=7}if(s<r-7){s+=7}o=n(e).add(s,"d");return{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function ot(e,t,n,i,r){var s=tt(e,0,1).getUTCDay(),o,a;s=s===0?7:s;n=n!=null?n:r;o=r-s+(s>i?7:0)-(s<r?7:0);a=7*(t-1)+(n-r)+o+1;return{year:a>0?e:e-1,dayOfYear:a>0?a:Re(e-1)+a}}function at(e){var i=e._i,r=e._f;e._locale=e._locale||n.localeData(e._l);if(i===null||r===t&&i===""){return n.invalid({nullInput:true})}if(typeof i==="string"){e._i=i=e._locale.preparse(i)}if(n.isMoment(i)){return new ue(i,true)}else if(r){if(_e(r)){Ke(e)}else{$e(e)}}else{Xe(e)}return new ue(e)}n=function(e,n,i,r){var s;if(typeof i==="boolean"){r=i;i=t}s={};s._isAMomentObject=true;s._i=e;s._f=n;s._l=i;s._strict=r;s._isUTC=false;s._pf=ne();return at(s)};n.suppressDeprecationWarnings=false;n.createFromInputFallback=re("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)});function lt(e,t){var i,r;if(t.length===1&&_e(t[0])){t=t[0]}if(!t.length){return n()}i=t[0];for(r=1;r<t.length;++r){if(t[r][e](i)){i=t[r]}}return i}n.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)};n.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)};n.utc=function(e,n,i,r){var s;if(typeof i==="boolean"){r=i;i=t}s={};s._isAMomentObject=true;s._useUTC=true;s._isUTC=true;s._l=i;s._i=e;s._f=n;s._strict=r;s._pf=ne();return at(s).utc()};n.unix=function(e){return n(e*1e3)};n.duration=function(e,t){var i=e,r=null,s,o,a,l;if(n.isDuration(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(typeof e==="number"){i={};if(t){i[t]=e}else{i.milliseconds=e}}else if(!!(r=_.exec(e))){s=r[1]==="-"?-1:1;i={y:0,d:Me(r[c])*s,h:Me(r[f])*s,m:Me(r[h])*s,s:Me(r[d])*s,ms:Me(r[p])*s}}else if(!!(r=b.exec(e))){s=r[1]==="-"?-1:1;a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s};i={y:a(r[2]),M:a(r[3]),d:a(r[4]),h:a(r[5]),m:a(r[6]),s:a(r[7]),w:a(r[8])}}else if(typeof i==="object"&&("from"in i||"to"in i)){l=ge(n(i.from),n(i.to));i={};i.ms=l.milliseconds;i.M=l.months}o=new ce(i);if(n.isDuration(e)&&e.hasOwnProperty("_locale")){o._locale=e._locale}return o};n.version=i;n.defaultFormat=Y;n.ISO_8601=function(){};n.momentProperties=g;n.updateOffset=function(){};n.relativeTimeThreshold=function(e,n){if(J[e]===t){return false}if(n===t){return J[e]}J[e]=n;return true};n.lang=re("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return n.locale(e,t)});n.locale=function(e,t){var i;if(e){if(typeof t!=="undefined"){i=n.defineLocale(e,t)}else{i=n.localeData(e)}if(i){n.duration._locale=n._locale=i}}return n._locale._abbr};n.defineLocale=function(e,t){if(t!==null){t.abbr=e;if(!v[e]){v[e]=new le}v[e].set(t);n.locale(e);return v[e]}else{delete v[e];return null}};n.langData=re("moment.langData is deprecated. Use moment.localeData instead.",function(e){return n.localeData(e)});n.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return n._locale}if(!_e(e)){t=Ie(e);if(t){return t}e=[e]}return Ae(e)};n.isMoment=function(e){return e instanceof ue||e!=null&&e.hasOwnProperty("_isAMomentObject")};n.isDuration=function(e){return e instanceof ce};for(a=ee.length-1;a>=0;--a){xe(ee[a])}n.normalizeUnits=function(e){return ke(e)};n.invalid=function(e){var t=n.utc(NaN);if(e!=null){fe(t._pf,e)}else{t._pf.userInvalidated=true}return t};n.parseZone=function(){return n.apply(null,arguments).parseZone()};n.parseTwoDigitYear=function(e){return Me(e)+(Me(e)>68?1900:2e3)};fe(n.fn=ue.prototype,{clone:function(){return n(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=n(this).utc();if(0<e.year()&&e.year()<=9999){return Ne(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}else{return Ne(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return De(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&we(this._a,(this._isUTC?n.utc(this._a):n(this._a)).toArray())>0}return false},parsingFlags:function(){return fe({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){if(this._isUTC){this.zone(0,e);this._isUTC=false;if(e){this.add(this._d.getTimezoneOffset(),"m")}}return this},format:function(e){var t=Ne(this,e||n.defaultFormat);return this.localeData().postformat(t)},add:me(1,"add"),subtract:me(-1,"subtract"),diff:function(e,t,i){var r=Pe(e,this),s=(this.zone()-r.zone())*6e4,o,a;t=ke(t);if(t==="year"||t==="month"){o=(this.daysInMonth()+r.daysInMonth())*432e5;a=(this.year()-r.year())*12+(this.month()-r.month());a+=(this-n(this).startOf("month")-(r-n(r).startOf("month")))/o;a-=(this.zone()-n(this).startOf("month").zone()-(r.zone()-n(r).startOf("month").zone()))*6e4/o;if(t==="year"){a=a/12}}else{o=this-r;a=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-s)/864e5:t==="week"?(o-s)/6048e5:o}return i?a:de(a)},from:function(e,t){return n.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(n(),e)},calendar:function(e){var t=e||n(),i=Pe(t,this).startOf("day"),r=this.diff(i,"days",true),s=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this))},isLeapYear:function(){return Fe(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=nt(e,this.localeData());return this.add(e-t,"d")}else{return t}},month:ht("Month",true),startOf:function(e){e=ke(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}else if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(e){e=ke(e);return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")},isAfter:function(e,t){t=typeof t!=="undefined"?t:"millisecond";return+this.clone().startOf(t)>+n(e).startOf(t)},isBefore:function(e,t){t=typeof t!=="undefined"?t:"millisecond";return+this.clone().startOf(t)<+n(e).startOf(t)},isSame:function(e,t){t=t||"ms";return+this.clone().startOf(t)===+Pe(e,this).startOf(t)},min:re("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){e=n.apply(null,arguments);return e<this?this:e}),max:re("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){e=n.apply(null,arguments);return e>this?this:e}),zone:function(e,t){var i=this._offset||0,r;if(e!=null){if(typeof e==="string"){e=Ue(e)}if(Math.abs(e)<16){e=e*60}if(!this._isUTC&&t){r=this._d.getTimezoneOffset()}this._offset=e;this._isUTC=true;if(r!=null){this.subtract(r,"m")}if(i!==e){if(!t||this._changeInProgress){ye(this,n.duration(i-e,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;n.updateOffset(this,true);this._changeInProgress=null}}}else{return this._isUTC?i:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else if(typeof this._i==="string"){this.zone(this._i)}return this},hasAlignedHourOffset:function(e){if(!e){e=0}else{e=n(e).zone()}return(this.zone()-e)%60===0},daysInMonth:function(){return Ee(this.year(),this.month())},dayOfYear:function(e){var t=o((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=st(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=st(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Se(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)},get:function(e){e=ke(e);return this[e]()},set:function(e,t){e=ke(e);if(typeof this[e]==="function"){this[e](t)}return this},locale:function(e){if(e===t){return this._locale._abbr}else{this._locale=n.localeData(e);return this}},lang:re("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){if(e===t){return this.localeData()}else{this._locale=n.localeData(e);return this}}),localeData:function(){return this._locale}});function ut(e,t){var n;if(typeof t==="string"){t=e.localeData().monthsParse(t);if(typeof t!=="number"){return e}}n=Math.min(e.date(),Ee(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function ct(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ft(e,t,n){if(t==="Month"){return ut(e,n)}else{return e._d["set"+(e._isUTC?"UTC":"")+t](n)}}function ht(e,t){return function(i){if(i!=null){ft(this,e,i);n.updateOffset(this,t);return this}else{return ct(this,e)}}}n.fn.millisecond=n.fn.milliseconds=ht("Milliseconds",false);n.fn.second=n.fn.seconds=ht("Seconds",false);n.fn.minute=n.fn.minutes=ht("Minutes",false);n.fn.hour=n.fn.hours=ht("Hours",true);n.fn.date=ht("Date",true);n.fn.dates=re("dates accessor is deprecated. Use date instead.",ht("Date",true));n.fn.year=ht("FullYear",true);n.fn.years=re("years accessor is deprecated. Use year instead.",ht("FullYear",true));n.fn.days=n.fn.day;n.fn.months=n.fn.month;n.fn.weeks=n.fn.week;n.fn.isoWeeks=n.fn.isoWeek;n.fn.quarters=n.fn.quarter;n.fn.toJSON=n.fn.toISOString;function dt(e){return e*400/146097}function pt(e){return e*146097/400}fe(n.duration.fn=ce.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,i=this._data,r,s,o,a=0;i.milliseconds=e%1e3;r=de(e/1e3);i.seconds=r%60;s=de(r/60);i.minutes=s%60;o=de(s/60);i.hours=o%24;t+=de(o/24);a=de(dt(t));t-=de(pt(a));n+=de(t/30);t%=30;a+=de(n/12);n%=12;i.days=t;i.months=n;i.years=a},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return de(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+Me(this._months/12)*31536e6},humanize:function(e){var t=rt(this,!e,this.localeData());if(e){t=this.localeData().pastFuture(+this,t)}return this.localeData().postformat(t)},add:function(e,t){var i=n.duration(e,t);this._milliseconds+=i._milliseconds;this._days+=i._days;this._months+=i._months;this._bubble();return this},subtract:function(e,t){var i=n.duration(e,t);this._milliseconds-=i._milliseconds;this._days-=i._days;this._months-=i._months;this._bubble();return this},get:function(e){e=ke(e);return this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=ke(e);t=this._days+this._milliseconds/864e5;if(e==="month"||e==="year"){n=this._months+dt(t)*12;return e==="month"?n:n/12}else{t+=pt(this._months/12);switch(e){case"week":return t/7;case"day":return t;case"hour":return t*24;case"minute":return t*24*60;case"second":return t*24*60*60;case"millisecond":return t*24*60*60*1e3;default:throw new Error("Unknown unit "+e)}}},lang:n.fn.lang,locale:n.fn.locale,toIsoString:re("toIsoString() is deprecated. Please use toISOString() instead "+"(notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":"")},localeData:function(){return this._locale}});function vt(e){n.duration.fn[e]=function(){return this._data[e]}}for(a in W){if(W.hasOwnProperty(a)){vt(a.toLowerCase())}}n.duration.fn.asMilliseconds=function(){return this.as("ms")};n.duration.fn.asSeconds=function(){return this.as("s")};n.duration.fn.asMinutes=function(){return this.as("m")};n.duration.fn.asHours=function(){return this.as("h")};n.duration.fn.asDays=function(){return this.as("d")};n.duration.fn.asWeeks=function(){return this.as("weeks")};n.duration.fn.asMonths=function(){return this.as("M")};n.duration.fn.asYears=function(){return this.as("y")};n.locale("en",{ordinal:function(e){var t=e%10,n=Me(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});function gt(e){if(typeof ender!=="undefined"){return}s=r.moment;if(e){r.moment=re("Accessing Moment through the global scope is "+"deprecated, and will be removed in an upcoming "+"release.",n)}else{r.moment=n}}if(m){e.exports=n}else if(typeof define==="function"&&define.amd){define("moment",function(e,t,i){if(i.config&&i.config()&&i.config().noGlobal===true){r.moment=s}return n});gt(true)}else{gt()}}).call(this)},function(e,t){e.exports='<div id="te-popout-content">\n\t<div class="preview-controls">\n\t\t<button id="te-popin-button" class="btn-preview-control btn-popin" title="{{#esc_attr}}{{#tl}}templates.editor.theme-editor.popout-interface_2{{/tl}}{{/esc_attr}}"></button>\n\t</div>\n</div>\n'}]);